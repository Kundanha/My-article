<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reel Scripts | Tech Content | Hinglish Coding Reels</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Prism.js for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <!-- Mermaid.js for Beautiful Diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #1a1a25;
            --bg-code: #0d0d14;
            --accent-pink: #ff006e;
            --accent-purple: #8338ec;
            --accent-blue: #3a86ff;
            --accent-cyan: #00f5d4;
            --accent-yellow: #ffbe0b;
            --accent-orange: #fb5607;
            --accent-green: #06d6a0;
            --accent-red: #ef476f;
            --text-primary: #ffffff;
            --text-secondary: #a1a1b5;
            --text-muted: #6b6b80;
            --border-color: #2a2a3a;
            --gradient-reel: linear-gradient(135deg, #ff006e 0%, #8338ec 50%, #3a86ff 100%);
            --gradient-instagram: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            --gradient-tiktok: linear-gradient(135deg, #00f2ea 0%, #ff0050 100%);
            --sidebar-width: 300px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
            min-height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 0, 110, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(131, 56, 236, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(58, 134, 255, 0.04) 0%, transparent 50%);
            animation: float 25s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-30px, -30px) rotate(5deg); }
        }

        /* Reading Progress Bar */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: var(--gradient-reel);
            z-index: 1000;
            transition: width 0.1s ease;
        }

        /* Layout */
        .layout {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            z-index: 100;
            padding: 1.5rem;
            transition: transform 0.3s ease;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        /* Sidebar Header */
        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-logo {
            font-size: 2rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .sidebar-title {
            font-size: 1.3rem;
            font-weight: 800;
            background: var(--gradient-reel);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* External Navigation Links */
        .nav-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .nav-external-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: rgba(131, 56, 236, 0.1);
            border: 1px solid rgba(131, 56, 236, 0.3);
            border-radius: 10px;
            color: var(--accent-purple);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-external-link:hover {
            background: var(--accent-purple);
            color: white;
            border-color: transparent;
            transform: translateX(5px);
        }

        .nav-external-link.active {
            background: var(--gradient-reel);
            color: white;
            border-color: transparent;
        }

        /* Script Count */
        .script-count {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .script-count-number {
            font-size: 2rem;
            font-weight: 800;
            background: var(--gradient-reel);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .script-count-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Progress Bar */
        .progress-section {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .progress-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .progress-stats {
            font-size: 0.85rem;
            font-weight: 700;
            background: var(--gradient-reel);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-bar-container {
            width: 100%;
            height: 12px;
            background: var(--bg-primary);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--gradient-reel);
            border-radius: 6px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(255, 255, 255, 0.2) 50%,
                transparent 100%
            );
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-percentage {
            text-align: center;
            margin-top: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Category Groups */
        .category-group {
            margin-bottom: 1rem;
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-header:hover {
            border-color: var(--accent-pink);
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .category-icon {
            font-size: 1.1rem;
        }

        .category-count {
            background: var(--accent-pink);
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .category-items {
            padding: 0.5rem 0 0.5rem 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.6rem 0.8rem;
            text-decoration: none;
            color: var(--text-secondary);
            border-radius: 8px;
            font-size: 0.85rem;
            transition: all 0.2s ease;
            border-left: 2px solid transparent;
        }

        .nav-item:hover {
            background: rgba(255, 0, 110, 0.1);
            color: var(--accent-pink);
            border-left-color: var(--accent-pink);
        }

        .nav-number {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-primary);
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent-cyan);
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Main Header */
        .main-header {
            text-align: center;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }

        .header-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--gradient-instagram);
            padding: 0.5rem 1.2rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
            margin-bottom: 1.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 0, 110, 0.4); }
            50% { box-shadow: 0 0 0 15px rgba(255, 0, 110, 0); }
        }

        .main-header h1 {
            font-size: 3.5rem;
            font-weight: 900;
            background: var(--gradient-reel);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            letter-spacing: -2px;
        }

        .main-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        .platform-badges {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .platform-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .platform-badge.instagram {
            background: linear-gradient(45deg, rgba(240, 148, 51, 0.2), rgba(188, 24, 136, 0.2));
            border-color: rgba(188, 24, 136, 0.3);
            color: #e1306c;
        }

        .platform-badge.youtube {
            background: rgba(255, 0, 0, 0.15);
            border-color: rgba(255, 0, 0, 0.3);
            color: #ff0000;
        }

        .platform-badge.linkedin {
            background: rgba(0, 119, 181, 0.15);
            border-color: rgba(0, 119, 181, 0.3);
            color: #0077b5;
        }

        /* ==================== REEL SCRIPT CARD ==================== */
        .reel-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            overflow: hidden;
            margin-bottom: 3rem;
            position: relative;
        }

        .reel-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-reel);
        }

        .reel-card.completed {
            border-color: rgba(6, 214, 160, 0.4);
        }

        .reel-card.completed::before {
            background: linear-gradient(90deg, #06d6a0, #00f5d4);
        }

        /* Collapsible Header */
        .reel-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem 2rem;
            background: linear-gradient(180deg, rgba(255, 0, 110, 0.05) 0%, transparent 100%);
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .reel-card-header:hover {
            background: linear-gradient(180deg, rgba(255, 0, 110, 0.1) 0%, transparent 100%);
        }

        .reel-card.completed .reel-card-header {
            background: linear-gradient(180deg, rgba(6, 214, 160, 0.1) 0%, transparent 100%);
        }

        .reel-card.completed .reel-card-header:hover {
            background: linear-gradient(180deg, rgba(6, 214, 160, 0.15) 0%, transparent 100%);
        }

        .reel-header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        /* Custom Checkbox */
        .reel-checkbox-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .reel-checkbox {
            appearance: none;
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .reel-checkbox:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 15px rgba(0, 245, 212, 0.3);
        }

        .reel-checkbox:checked {
            background: linear-gradient(135deg, #06d6a0, #00f5d4);
            border-color: #06d6a0;
        }

        .reel-checkbox:checked::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #0a0a0f;
            font-size: 16px;
            font-weight: bold;
        }

        /* Header Info */
        .reel-header-info {
            flex: 1;
        }

        .reel-header-top {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
        }

        .reel-header-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .reel-header-subtitle {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Expand/Collapse Icon */
        .reel-expand-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 1.2rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .reel-card-header:hover .reel-expand-icon {
            border-color: var(--accent-purple);
            color: var(--accent-purple);
        }

        .reel-card.expanded .reel-expand-icon {
            transform: rotate(180deg);
            background: var(--accent-purple);
            border-color: var(--accent-purple);
            color: white;
        }

        /* Collapsible Content */
        .reel-card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }

        .reel-card.expanded .reel-card-content {
            max-height: none;
        }

        /* Reel Header (inside content) */
        .reel-header {
            padding: 2rem 2.5rem;
            background: linear-gradient(180deg, rgba(255, 0, 110, 0.05) 0%, transparent 100%);
            border-bottom: 1px solid var(--border-color);
        }

        .reel-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .reel-number {
            background: var(--gradient-reel);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
        }

        .reel-duration {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            background: rgba(0, 245, 212, 0.15);
            color: var(--accent-cyan);
            padding: 0.4rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .reel-category {
            background: rgba(131, 56, 236, 0.15);
            color: var(--accent-purple);
            padding: 0.4rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .reel-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .reel-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Hook Section */
        .hook-section {
            padding: 1.5rem 2.5rem;
            background: linear-gradient(135deg, rgba(255, 0, 110, 0.1) 0%, rgba(131, 56, 236, 0.1) 100%);
            border-bottom: 1px solid var(--border-color);
        }

        .hook-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--accent-pink);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.8rem;
        }

        .hook-text {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-primary);
            font-family: 'Poppins', sans-serif;
        }

        /* Script Section */
        .script-section {
            padding: 2rem 2.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.2rem;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .section-subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Script Content */
        .script-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 1.5rem 2rem;
            position: relative;
            overflow: hidden;
        }

        .script-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-reel);
        }

        .script-text {
            font-size: 1.05rem;
            line-height: 2;
            color: var(--text-secondary);
            font-family: 'Poppins', sans-serif;
        }

        .script-text .highlight {
            background: linear-gradient(135deg, rgba(255, 0, 110, 0.2), rgba(131, 56, 236, 0.2));
            padding: 0.1rem 0.4rem;
            border-radius: 4px;
            color: var(--accent-pink);
            font-weight: 600;
        }

        .script-text .emphasis {
            color: var(--accent-cyan);
            font-weight: 600;
        }

        .script-text .question {
            color: var(--accent-yellow);
            font-weight: 600;
        }

        /* Paragraph breaks in script */
        .script-para {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed var(--border-color);
        }

        .script-para:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        /* Code Section */
        .code-section {
            padding: 2rem 2.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .code-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .code-tab {
            padding: 0.6rem 1.2rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .code-tab:hover {
            border-color: var(--accent-purple);
            color: var(--accent-purple);
        }

        .code-tab.active {
            background: var(--gradient-reel);
            border-color: transparent;
            color: white;
        }

        .code-tab.naive {
            border-color: rgba(239, 71, 111, 0.3);
            color: var(--accent-red);
        }

        .code-tab.naive.active {
            background: var(--accent-red);
            color: white;
        }

        .code-tab.fixed {
            border-color: rgba(6, 214, 160, 0.3);
            color: var(--accent-green);
        }

        .code-tab.fixed.active {
            background: var(--accent-green);
            color: #0a0a0f;
        }

        /* Code Block */
        .code-block {
            background: linear-gradient(145deg, #0d0d14 0%, #12121a 100%);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .code-block.naive {
            border-color: rgba(239, 71, 111, 0.3);
        }

        .code-block.naive::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-red);
        }

        .code-block.fixed {
            border-color: rgba(6, 214, 160, 0.3);
        }

        .code-block.fixed::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-green);
        }

        .code-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.8rem 1.2rem;
            background: rgba(255, 255, 255, 0.02);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .code-header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .code-dots {
            display: flex;
            gap: 6px;
        }

        .code-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .code-dot.red { background: #ff5f56; }
        .code-dot.yellow { background: #ffbd2e; }
        .code-dot.green { background: #27ca40; }

        .code-lang {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: var(--accent-blue);
            font-weight: 500;
        }

        .code-label {
            padding: 0.3rem 0.7rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .code-label.naive {
            background: rgba(239, 71, 111, 0.2);
            color: var(--accent-red);
        }

        .code-label.fixed {
            background: rgba(6, 214, 160, 0.2);
            color: var(--accent-green);
        }

        .copy-btn {
            padding: 0.4rem 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: var(--text-muted);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .copy-btn:hover {
            background: var(--accent-purple);
            border-color: var(--accent-purple);
            color: white;
        }

        .code-block pre {
            margin: 0 !important;
            padding: 1.5rem !important;
            background: transparent !important;
            font-size: 0.9rem !important;
            line-height: 1.8 !important;
            overflow-x: auto;
        }

        .code-block pre code {
            font-family: 'JetBrains Mono', monospace !important;
            font-size: 0.88rem !important;
        }

        /* Code Comparison */
        .code-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 900px) {
            .code-comparison {
                grid-template-columns: 1fr;
            }
        }

        /* Full Code Section */
        .full-code-section {
            padding: 2rem 2.5rem;
            background: rgba(131, 56, 236, 0.03);
            border-bottom: 1px solid var(--border-color);
        }

        .code-step {
            margin-bottom: 2rem;
        }

        .code-step:last-child {
            margin-bottom: 0;
        }

        .code-step-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .step-number {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient-reel);
            border-radius: 50%;
            font-size: 0.85rem;
            font-weight: 700;
            color: white;
        }

        .step-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Takeaway Section */
        .takeaway-section {
            padding: 2rem 2.5rem;
            background: linear-gradient(135deg, rgba(6, 214, 160, 0.08) 0%, rgba(58, 134, 255, 0.08) 100%);
        }

        .takeaway-box {
            background: var(--bg-secondary);
            border: 1px solid rgba(6, 214, 160, 0.3);
            border-radius: 16px;
            padding: 1.5rem 2rem;
            position: relative;
            overflow: hidden;
        }

        .takeaway-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan));
        }

        .takeaway-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--accent-green);
            color: #0a0a0f;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .takeaway-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.6;
            font-family: 'Poppins', sans-serif;
        }

        .takeaway-text .highlight {
            background: linear-gradient(135deg, rgba(6, 214, 160, 0.2), rgba(58, 134, 255, 0.2));
            padding: 0.1rem 0.4rem;
            border-radius: 4px;
            color: var(--accent-green);
        }

        /* Future Ideas */
        .future-ideas {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .future-idea {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.5rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }

        .future-idea:hover {
            border-color: var(--accent-purple);
            color: var(--accent-purple);
        }

        .future-idea::before {
            content: '→';
            color: var(--accent-cyan);
        }

        /* Workflow Visual */
        .workflow-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            padding: 2rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
        }

        .workflow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .workflow-step:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 245, 212, 0.2);
        }

        .workflow-icon {
            font-size: 2rem;
        }

        .workflow-label {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .workflow-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .workflow-arrow {
            font-size: 1.5rem;
            color: var(--accent-pink);
            font-weight: bold;
            animation: arrowPulse 1.5s infinite;
        }

        @keyframes arrowPulse {
            0%, 100% { opacity: 0.5; transform: translateX(0); }
            50% { opacity: 1; transform: translateX(3px); }
        }

        /* Bottom Line Box */
        .bottom-line-box {
            margin-top: 1.5rem;
            background: linear-gradient(135deg, rgba(255, 0, 110, 0.1) 0%, rgba(131, 56, 236, 0.1) 100%);
            border: 2px solid var(--accent-pink);
            border-radius: 16px;
            padding: 1.5rem 2rem;
            position: relative;
            overflow: hidden;
        }

        .bottom-line-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-reel);
        }

        .bottom-line-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--accent-pink);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .bottom-line-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.7;
            font-family: 'Poppins', sans-serif;
        }

        .bottom-line-text .emphasis {
            color: var(--accent-cyan);
            font-weight: 700;
        }

        /* ==================== VISUAL DIAGRAM STYLING ==================== */
        .diagram-section {
            padding: 2rem 2.5rem;
            background: linear-gradient(135deg, rgba(58, 134, 255, 0.05) 0%, rgba(131, 56, 236, 0.05) 100%);
            border-bottom: 1px solid var(--border-color);
        }

        /* ==================== MERMAID DIAGRAM STYLING ==================== */
        .mermaid-container {
            background: linear-gradient(145deg, #0d0d14 0%, #15151f 50%, #0d0d14 100%);
            border: 1px solid rgba(0, 245, 212, 0.25);
            border-radius: 20px;
            padding: 2rem;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.05),
                0 0 50px rgba(0, 245, 212, 0.05);
        }

        .mermaid-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple), var(--accent-pink));
        }

        .mermaid-container .diagram-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, rgba(0, 245, 212, 0.15), rgba(131, 56, 236, 0.15));
            border: 1px solid rgba(0, 245, 212, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            color: var(--accent-cyan);
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .mermaid {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }

        /* Mermaid Dark Theme Overrides */
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }

        .mermaid .node rect,
        .mermaid .node circle,
        .mermaid .node ellipse,
        .mermaid .node polygon,
        .mermaid .node path {
            fill: #1a1a28 !important;
            stroke: var(--accent-cyan) !important;
            stroke-width: 2px !important;
        }

        .mermaid .node.default > rect,
        .mermaid .node.default > polygon {
            fill: linear-gradient(145deg, #1a1a28, #12121c) !important;
        }

        .mermaid .edgePath .path {
            stroke: var(--accent-purple) !important;
            stroke-width: 2px !important;
        }

        .mermaid .edgeLabel {
            background-color: #12121a !important;
            color: var(--text-secondary) !important;
        }

        .mermaid .label {
            color: #fff !important;
            font-family: 'Inter', sans-serif !important;
        }

        .mermaid .cluster rect {
            fill: rgba(131, 56, 236, 0.1) !important;
            stroke: var(--accent-purple) !important;
        }

        .mermaid .cluster text {
            fill: var(--accent-purple) !important;
        }

        /* ASCII Diagram fallback */
        .visual-diagram {
            background: linear-gradient(145deg, #0a0a12 0%, #12121c 50%, #0a0a12 100%);
            border: 1px solid rgba(0, 245, 212, 0.2);
            border-radius: 20px;
            padding: 2rem 2.5rem;
            margin: 1rem 0;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.78rem;
            line-height: 1.45;
            color: #c6d0f5;
            overflow-x: auto;
            white-space: pre;
            position: relative;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.05),
                0 0 40px rgba(0, 245, 212, 0.03);
        }

        .visual-diagram::before {
            content: attr(data-label);
            position: absolute;
            top: -12px;
            left: 24px;
            background: linear-gradient(135deg, #0a0a12, #12121c);
            padding: 4px 16px;
            border-radius: 20px;
            font-size: 0.7rem;
            color: var(--accent-cyan);
            font-weight: 700;
            border: 1px solid rgba(0, 245, 212, 0.3);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .visual-diagram::-webkit-scrollbar {
            height: 8px;
        }

        .visual-diagram::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 4px;
        }

        .visual-diagram::-webkit-scrollbar-thumb {
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple));
            border-radius: 4px;
        }

        /* Architecture Diagram Container */
        .architecture-diagram {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
        }

        .architecture-diagram::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple), var(--accent-pink));
        }

        .architecture-diagram h4 {
            color: var(--accent-cyan);
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Class Diagram Boxes */
        .class-diagram {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-items: center;
        }

        .class-row {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .class-box {
            background: linear-gradient(145deg, #12121c, #1a1a28);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            min-width: 200px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .class-box:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 245, 212, 0.15);
        }

        .class-box.interface {
            border-color: rgba(131, 56, 236, 0.5);
        }

        .class-box.interface:hover {
            border-color: var(--accent-purple);
            box-shadow: 0 10px 30px rgba(131, 56, 236, 0.2);
        }

        .class-box.context {
            border-color: rgba(58, 134, 255, 0.5);
        }

        .class-box.context:hover {
            border-color: var(--accent-blue);
            box-shadow: 0 10px 30px rgba(58, 134, 255, 0.2);
        }

        .class-header {
            background: rgba(255, 255, 255, 0.03);
            padding: 0.8rem 1rem;
            border-bottom: 1px solid var(--border-color);
            text-align: center;
        }

        .class-stereotype {
            font-size: 0.7rem;
            color: var(--accent-purple);
            font-style: italic;
        }

        .class-name {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
        }

        .class-body {
            padding: 1rem;
        }

        .class-method {
            font-size: 0.8rem;
            color: var(--accent-green);
            font-family: 'JetBrains Mono', monospace;
            padding: 0.3rem 0;
        }

        /* Arrows */
        .diagram-arrow {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--accent-pink);
            font-size: 1.5rem;
            padding: 0.5rem 0;
        }

        .diagram-arrow span {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 0.3rem;
        }

        .horizontal-arrows {
            display: flex;
            justify-content: center;
            gap: 4rem;
            margin: 1rem 0;
        }

        .arrow-up {
            animation: arrowBounceUp 1.5s infinite;
        }

        @keyframes arrowBounceUp {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            padding: 1.5rem;
        }

        .flow-node {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            background: linear-gradient(145deg, #1a1a28, #12121c);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        .flow-node:hover {
            border-color: var(--accent-cyan);
            transform: scale(1.05);
        }

        .flow-node.user {
            border-color: rgba(255, 190, 11, 0.5);
        }

        .flow-node.user:hover {
            border-color: var(--accent-yellow);
            box-shadow: 0 5px 20px rgba(255, 190, 11, 0.2);
        }

        .flow-node.service {
            border-color: rgba(6, 214, 160, 0.5);
        }

        .flow-node.service:hover {
            border-color: var(--accent-green);
            box-shadow: 0 5px 20px rgba(6, 214, 160, 0.2);
        }

        .flow-node-icon {
            font-size: 1.8rem;
        }

        .flow-node-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .flow-arrow {
            font-size: 1.3rem;
            color: var(--accent-pink);
            animation: flowPulse 1.5s infinite;
        }

        @keyframes flowPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Responsive workflow */
        @media (max-width: 768px) {
            .workflow-visual {
                flex-direction: column;
                gap: 1rem;
            }

            .workflow-arrow {
                transform: rotate(90deg);
            }

            @keyframes arrowPulse {
                0%, 100% { opacity: 0.5; transform: rotate(90deg) translateX(0); }
                50% { opacity: 1; transform: rotate(90deg) translateX(3px); }
            }

            .class-row {
                flex-direction: column;
                gap: 1rem;
            }

            .horizontal-arrows {
                flex-direction: column;
                gap: 1rem;
            }

            .flow-diagram {
                flex-direction: column;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }

            .visual-diagram {
                font-size: 0.65rem;
                padding: 1.5rem;
            }
        }

        /* Prism.js Token Colors - Catppuccin Mocha */
        .token.comment,
        .token.prolog,
        .token.doctype,
        .token.cdata {
            color: #6c7086 !important;
            font-style: italic;
        }

        .token.punctuation {
            color: #cdd6f4 !important;
        }

        .token.property,
        .token.tag,
        .token.constant,
        .token.symbol,
        .token.deleted {
            color: #f38ba8 !important;
        }

        .token.boolean,
        .token.number {
            color: #fab387 !important;
        }

        .token.selector,
        .token.attr-name,
        .token.string,
        .token.char,
        .token.builtin,
        .token.inserted {
            color: #a6e3a1 !important;
        }

        .token.operator,
        .token.entity,
        .token.url,
        .language-css .token.string,
        .style .token.string {
            color: #89dceb !important;
        }

        .token.atrule,
        .token.attr-value,
        .token.keyword {
            color: #cba6f7 !important;
            font-weight: 500;
        }

        .token.function,
        .token.class-name {
            color: #89b4fa !important;
        }

        .token.regex,
        .token.important,
        .token.variable {
            color: #f9e2af !important;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 3rem 0;
            color: var(--text-muted);
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
            margin-top: 2rem;
        }

        .footer a {
            color: var(--accent-pink);
            text-decoration: none;
        }

        /* Back to Top */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: var(--gradient-reel);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            box-shadow: 0 5px 20px rgba(255, 0, 110, 0.4);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .back-to-top:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 0, 110, 0.6);
        }

        /* Mobile Toggle */
        .mobile-toggle {
            display: none;
            position: fixed;
            bottom: 2rem;
            left: 1rem;
            width: 50px;
            height: 50px;
            background: var(--gradient-reel);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            color: white;
            z-index: 200;
            box-shadow: 0 5px 20px rgba(255, 0, 110, 0.4);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .mobile-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .main-header h1 {
                font-size: 2.5rem;
            }

            .container {
                padding: 1rem;
            }

            .reel-header,
            .hook-section,
            .script-section,
            .code-section,
            .full-code-section,
            .takeaway-section {
                padding: 1.5rem;
            }

            .reel-title {
                font-size: 1.4rem;
            }

            .hook-text {
                font-size: 1.1rem;
            }

            .platform-badges {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    <div class="reading-progress" id="readingProgress"></div>

    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <span class="sidebar-logo">🎬</span>
                <span class="sidebar-title">Reel Scripts</span>
            </div>

            <!-- External Nav Links -->
            <div class="nav-links">
                <a href="system-design.html" class="nav-external-link">
                    <span>🏗️</span>
                    <span>System Design</span>
                </a>
                <a href="dsa-notes.html" class="nav-external-link">
                    <span>🧠</span>
                    <span>DSA Notes</span>
                </a>
                <a href="reel-scripts.html" class="nav-external-link active">
                    <span>🎬</span>
                    <span>Reel Scripts</span>
                </a>
                <a href="abs-notes.html" class="nav-external-link">
                    <span>🤖</span>
                    <span>ABS Notes</span>
                </a>
            </div>

            <!-- Script Count -->
            <div class="script-count">
                <div class="script-count-number">12</div>
                <div class="script-count-label">Scripts Ready</div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-section">
                <div class="progress-header">
                    <span class="progress-title">📊 Completion</span>
                    <span class="progress-stats" id="progressStats">0/12</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="progressBarFill" style="width: 0%"></div>
                </div>
                <div class="progress-percentage" id="progressPercentage">0% Complete</div>
            </div>

            <!-- Design Patterns Category -->
            <div class="category-group" id="design-patterns">
                <div class="category-header" onclick="toggleCategory('design-patterns')">
                    <span class="category-title">
                        <span class="category-icon">🎨</span>
                        Design Patterns
                    </span>
                    <span class="category-count">7</span>
                </div>
                <div class="category-items">
                    <a href="#strategy-pattern" class="nav-item">
                        <span class="nav-number">01</span>
                        <span>Strategy Pattern</span>
                    </a>
                    <a href="#orchestrator-pattern" class="nav-item">
                        <span class="nav-number">02</span>
                        <span>Orchestrator Pattern</span>
                    </a>
                    <a href="#result-pattern" class="nav-item">
                        <span class="nav-number">03</span>
                        <span>Result Pattern</span>
                    </a>
                    <a href="#repository-pattern" class="nav-item">
                        <span class="nav-number">04</span>
                        <span>Repository Pattern</span>
                    </a>
                    <a href="#separation-of-concerns" class="nav-item">
                        <span class="nav-number">05</span>
                        <span>Separation of Concerns</span>
                    </a>
                    <a href="#singleton-pattern" class="nav-item">
                        <span class="nav-number">06</span>
                        <span>Singleton Pattern</span>
                    </a>
                    <a href="#factory-pattern" class="nav-item">
                        <span class="nav-number">07</span>
                        <span>Factory Pattern</span>
                    </a>
                </div>
            </div>

            <!-- System Design Fundamentals Category -->
            <div class="category-group" id="system-design-fundamentals">
                <div class="category-header" onclick="toggleCategory('system-design-fundamentals')">
                    <span class="category-title">
                        <span class="category-icon">🏗️</span>
                        System Design Basics
                    </span>
                    <span class="category-count">5</span>
                </div>
                <div class="category-items">
                    <a href="#system-design-intro" class="nav-item">
                        <span class="nav-number">08</span>
                        <span>System Design Intro</span>
                    </a>
                    <a href="#system-types-layers" class="nav-item">
                        <span class="nav-number">09</span>
                        <span>Types & Layers</span>
                    </a>
                    <a href="#spiral-approach" class="nav-item">
                        <span class="nav-number">10</span>
                        <span>Spiral Approach</span>
                    </a>
                    <a href="#mvp-approach" class="nav-item">
                        <span class="nav-number">11</span>
                        <span>MVP Approach</span>
                    </a>
                    <a href="#golden-rules" class="nav-item">
                        <span class="nav-number">12</span>
                        <span>3 Golden Rules</span>
                    </a>
                </div>
            </div>

            <!-- Coming Soon Category -->
            <div class="category-group" id="coming-soon">
                <div class="category-header">
                    <span class="category-title">
                        <span class="category-icon">🚀</span>
                        Coming Soon
                    </span>
                    <span class="category-count">...</span>
                </div>
            </div>
        </aside>

        <!-- Mobile Toggle Button -->
        <button class="mobile-toggle" id="mobileToggle" onclick="toggleSidebar()">
            ☰
        </button>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Main Header -->
                <header class="main-header">
                    <div class="header-badge">
                        <span>🔥</span>
                        <span>Content Creator Kit</span>
                    </div>
                    <h1>Reel Scripts</h1>
                    <p class="main-subtitle">Tech content scripts in Hinglish — 45 seconds of pure value! 🚀<br>Ready-to-record with code snippets.</p>
                    <div class="platform-badges">
                        <span class="platform-badge instagram">
                            <span>📸</span> Instagram
                        </span>
                        <span class="platform-badge youtube">
                            <span>▶️</span> YouTube Shorts
                        </span>
                        <span class="platform-badge linkedin">
                            <span>💼</span> LinkedIn
                        </span>
                    </div>
                    <div class="progress-badge-wrapper" style="margin-top: 1.5rem;">
                        <span class="progress-badge" style="
                            display: inline-flex;
                            align-items: center;
                            gap: 0.5rem;
                            padding: 0.6rem 1.2rem;
                            background: linear-gradient(135deg, rgba(6, 214, 160, 0.2), rgba(0, 245, 212, 0.2));
                            border: 1px solid rgba(6, 214, 160, 0.3);
                            border-radius: 50px;
                            color: #06d6a0;
                            font-size: 0.9rem;
                            font-weight: 600;
                        ">✅ 0/7 Completed</span>
                    </div>
                </header>

                <!-- ==================== REEL #1: STRATEGY PATTERN ==================== -->
                <article class="reel-card" id="strategy-pattern" data-reel="1">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-strategy" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #01</span>
                                    <span class="reel-duration">⏱️ 45 sec</span>
                                    <span class="reel-category">Design Pattern</span>
                                </div>
                                <h2 class="reel-header-title">Strategy Pattern — ChatGPT Instant vs Thinking Mode</h2>
                                <p class="reel-header-subtitle">Same feature, multiple behaviors — production-safe design!</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #01</span>
                            <span class="reel-duration">⏱️ 45 sec</span>
                            <span class="reel-category">Design Pattern</span>
                        </div>
                        <h2 class="reel-title">Strategy Pattern — ChatGPT Instant vs Thinking Mode</h2>
                        <p class="reel-subtitle">Same feature, multiple behaviors — production-safe design!</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">ChatGPT me instant mode aur thinking mode use kiya hai?</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">45-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">ChatGPT me instant mode aur thinking mode use kiya hai?</span><br>
                                    Kabhi tumhe bas ek <span class="highlight">quick answer</span> chahiye hota hai, instant mode use kar lete ho. Aur kabhi bolte ho <span class="emphasis">"thoda detail me soch ke batao"</span>, tab thinking mode kaam aata hai.
                                </div>
                                
                                <div class="script-para">
                                    User ke liye feature same hai — <span class="highlight">answer chahiye</span>, bas behavior alag hai.
                                </div>

                                <div class="script-para">
                                    Ab suppose tum apna khud ka chat app bana rahe ho. Tum sochte ho instant bhi denge, thinking bhi.<br>
                                    <span class="emphasis">Naive approach</span> me kya karte ho? Ek hi method me likh dete ho — agar instant hai toh simple logic, warna heavy reasoning.
                                </div>

                                <div class="script-para">
                                    Shuru me sab theek lagta hai, par <span class="highlight">prod me jaake</span> jaise hi tuning ya naya mode add hota hai, wahi method <span class="emphasis">risky</span> ho jata hai. Ek change karo aur dusra mode quietly break.
                                </div>

                                <div class="script-para">
                                    Problem mode ka nahi hai, problem ye hai ki <span class="highlight">behavior tightly coupled</span> hai.<br>
                                    Yahin <span class="emphasis">Strategy Pattern</span> ka use hota hai.
                                </div>

                                <div class="script-para">
                                    Isme <span class="highlight">"answer generate karna"</span> ek contract ban jata hai, aur instant aur thinking uske <span class="emphasis">alag-alag strategies</span> hote hain. Chat service bas strategy call karti hai.
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Final takeaway:</span> same feature, multiple behaviors — agar prod-safe design chahiye, toh <span class="emphasis">if-else nahi, Strategy Pattern use karo.</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">Strategy Pattern class structure — powered by Mermaid.js</div>
                            </div>
                        </div>

                        <!-- Mermaid Class Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">📐 Strategy Pattern UML</div>
                            <div class="mermaid">
classDiagram
    class IAnswerStrategy {
        &lt;&lt;interface&gt;&gt;
        +Ask(prompt) string
    }
    
    class InstantAnswerStrategy {
        +Ask(prompt) string
        Quick response ⚡
    }
    
    class ThinkingAnswerStrategy {
        +Ask(prompt) string
        Deep reasoning 🧠
    }
    
    class FutureStrategy {
        +Ask(prompt) string
        Your new mode! 🚀
    }
    
    class ChatService {
        -_strategy: IAnswerStrategy
        +Ask(prompt) string
    }
    
    IAnswerStrategy <|.. InstantAnswerStrategy : implements
    IAnswerStrategy <|.. ThinkingAnswerStrategy : implements
    IAnswerStrategy <|.. FutureStrategy : implements
    ChatService --> IAnswerStrategy : uses
                            </div>
                        </div>

                        <!-- Flow Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🔄 Runtime Flow</div>
                            <div class="mermaid">
flowchart LR
    A[👤 User Request] --> B{mode = ?}
    B -->|instant| C[InstantAnswerStrategy]
    B -->|thinking| D[ThinkingAnswerStrategy]
    B -->|streaming| E[StreamingStrategy]
    C --> F[ChatService]
    D --> F
    E --> F
    F --> G[📤 Response]
    
    style A fill:#1a1a28,stroke:#ffbe0b,color:#fff
    style B fill:#1a1a28,stroke:#8338ec,color:#fff
    style C fill:#1a1a28,stroke:#06d6a0,color:#fff
    style D fill:#1a1a28,stroke:#3a86ff,color:#fff
    style E fill:#1a1a28,stroke:#ff006e,color:#fff
    style F fill:#1a1a28,stroke:#00f5d4,color:#fff
    style G fill:#1a1a28,stroke:#06d6a0,color:#fff
                            </div>
                        </div>

                        <!-- Comparison Diagram -->
                        <div class="architecture-diagram">
                            <h4>⚔️ Naive vs Strategy — Visual Comparison</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- Naive Approach -->
                                <div class="mermaid-container" style="border-color: rgba(239, 71, 111, 0.4);">
                                    <div class="diagram-label" style="background: rgba(239, 71, 111, 0.2); border-color: rgba(239, 71, 111, 0.4); color: #ef476f;">❌ Naive Approach</div>
                                    <div class="mermaid">
flowchart TD
    A[Ask Method] --> B{if mode == instant}
    B -->|YES| C[QuickAnswer]
    B -->|NO| D{if mode == thinking}
    D -->|YES| E[DeepAnswer]
    D -->|NO| F{if mode == streaming}
    F -->|YES| G[StreamAnswer]
    F -->|NO| H[💀 More ifs...]
    
    style A fill:#2d1f1f,stroke:#ef476f,color:#fff
    style B fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C fill:#2d1f1f,stroke:#ef476f,color:#fff
    style D fill:#2d1f1f,stroke:#ef476f,color:#fff
    style E fill:#2d1f1f,stroke:#ef476f,color:#fff
    style F fill:#2d1f1f,stroke:#ef476f,color:#fff
    style G fill:#2d1f1f,stroke:#ef476f,color:#fff
    style H fill:#2d1f1f,stroke:#ef476f,color:#fff
                                    </div>
                                </div>

                                <!-- Strategy Approach -->
                                <div class="mermaid-container" style="border-color: rgba(6, 214, 160, 0.4);">
                                    <div class="diagram-label" style="background: rgba(6, 214, 160, 0.2); border-color: rgba(6, 214, 160, 0.4); color: #06d6a0;">✅ Strategy Pattern</div>
                                    <div class="mermaid">
flowchart TD
    A[ChatService] --> B[IAnswerStrategy]
    B --> C[strategy.Ask]
    C --> D[✨ Returns Answer]
    
    E[Instant] -.-> B
    F[Thinking] -.-> B
    G[New Mode] -.-> B
    
    style A fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style B fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style C fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style D fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style E fill:#1f2d1f,stroke:#3a86ff,color:#fff
    style F fill:#1f2d1f,stroke:#8338ec,color:#fff
    style G fill:#1f2d1f,stroke:#ff006e,color:#fff
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Code Section - Comparison -->
                    <div class="code-section">
                        <div class="section-header">
                            <div class="section-icon">💻</div>
                            <div>
                                <div class="section-title">Code Comparison — Naive vs Fixed</div>
                                <div class="section-subtitle">Show both in reel for maximum impact</div>
                            </div>
                        </div>

                        <div class="code-comparison">
                            <!-- Naive Code -->
                            <div class="code-block naive">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label naive">❌ NAIVE</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">string Ask(string prompt, string mode)
{
    if (mode == "instant")
        return QuickAnswer(prompt);

    return DeepAnswer(prompt);
}</code></pre>
                            </div>

                            <!-- Fixed Code -->
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label fixed">✅ STRATEGY</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public interface IAnswerStrategy
{
    string Ask(string prompt);
}

class ChatService
{
    IAnswerStrategy strategy;
    public ChatService(IAnswerStrategy s) 
        => strategy = s;

    public string Ask(string prompt) 
        => strategy.Ask(prompt);
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Full Code Section -->
                    <div class="full-code-section">
                        <div class="section-header">
                            <div class="section-icon">📦</div>
                            <div>
                                <div class="section-title">Complete Production Code</div>
                                <div class="section-subtitle">Screenshot-friendly, end-to-end example</div>
                            </div>
                        </div>

                        <!-- Step 1: Interface -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">1</span>
                                <span class="step-title">Strategy Interface — The Contract</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">IAnswerStrategy.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public interface IAnswerStrategy
{
    string Ask(string prompt);
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 2: Instant Strategy -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">2</span>
                                <span class="step-title">Instant Mode Strategy — Fast & Light</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">InstantAnswerStrategy.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class InstantAnswerStrategy : IAnswerStrategy
{
    public string Ask(string prompt)
    {
        // Fast, lightweight response
        return $"Instant answer for: {prompt}";
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 3: Thinking Strategy -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">3</span>
                                <span class="step-title">Thinking Mode Strategy — Deep Reasoning</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">ThinkingAnswerStrategy.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class ThinkingAnswerStrategy : IAnswerStrategy
{
    public string Ask(string prompt)
    {
        // Slower, more detailed reasoning
        return $"Thinking deeply and answering: {prompt}";
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 4: Context -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">4</span>
                                <span class="step-title">Context (Chat Service) — Strategy Consumer</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">ChatService.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class ChatService
{
    private readonly IAnswerStrategy _strategy;

    public ChatService(IAnswerStrategy strategy)
    {
        _strategy = strategy;
    }

    public string Ask(string prompt)
    {
        return _strategy.Ask(prompt);
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 5: Usage -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">5</span>
                                <span class="step-title">Usage — Runtime Strategy Selection</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">Program.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">class Program
{
    static void Main()
    {
        IAnswerStrategy strategy;

        string mode = "instant"; // or "thinking"

        if (mode == "instant")
            strategy = new InstantAnswerStrategy();
        else
            strategy = new ThinkingAnswerStrategy();

        var chatService = new ChatService(strategy);

        var response = chatService.Ask("Explain Strategy Pattern");
        Console.WriteLine(response);
    }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">What this demonstrates</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 Production Insight</div>
                            <p class="takeaway-text">
                                Same <span class="highlight">feature</span>: <code>Ask(prompt)</code><br>
                                Different <span class="highlight">behaviors</span>: Instant vs Thinking<br>
                                No <code>if-else</code> inside business logic<br>
                                Easy to add future modes without breaking existing ones!
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">StreamingAnswerStrategy</span>
                                <span class="future-idea">ToolCallingAnswerStrategy</span>
                                <span class="future-idea">BudgetOptimizedAnswerStrategy</span>
                                <span class="future-idea">MultiModalAnswerStrategy</span>
                            </div>
                        </div>
                    </div>
                    </div>
                </article> -->
                <article class="reel-card" id="orchestrator-pattern" data-reel="2">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-orchestrator" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #02</span>
                                    <span class="reel-duration">⏱️ 50 sec</span>
                                    <span class="reel-category">Architecture Pattern</span>
                                </div>
                                <h2 class="reel-header-title">Orchestrator Pattern — RAG Pipeline Architecture</h2>
                                <p class="reel-header-subtitle">Services ko seedha baat nahi karni chahiye — ek conductor chahiye!</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #02</span>
                            <span class="reel-duration">⏱️ 60 sec</span>
                            <span class="reel-category">Architecture Pattern</span>
                        </div>
                        <h2 class="reel-title">Orchestrator Pattern — LLM App Workflow Design</h2>
                        <p class="reel-subtitle">Multi-step workflows in RAG, Ingestion, and AI pipelines — the director approach!</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">Socho tum ek LLM app bana rahe ho… jahan user bolta hai: "Mera project ingest karo aur us pe questions answer karo."</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">60-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters — Workflow explained!</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">Socho tum ek LLM app bana rahe ho… jahan user bolta hai: "Mera project ingest karo aur us pe questions answer karo."</span><br>
                                    Ab ye ek request dikhti simple hai, but andar se ye <span class="highlight">pura workflow</span> hota hai.
                                </div>
                                
                                <div class="script-para">
                                    Suppose user ne click kiya: <span class="emphasis">"Ingest Source"</span>.<br>
                                    Ab tumhe ek hi kaam nahi karna — tumhe <span class="highlight">5 cheezein properly coordinate</span> karni hain.
                                </div>

                                <div class="script-para">
                                    <span class="emphasis">Pehla step: content lana.</span> Chahe repo ho, docs ho, ya files — raw data aata hai.<br>
                                    <span class="emphasis">Second step: normalize.</span> Jo content messy hai — markdown, extra symbols, empty lines — usko clean karke standard format me laana.<br>
                                    <span class="emphasis">Third step: chunking.</span> Poora file LLM ko nahi de sakte. Token limit hoti hai. Content ko meaningful parts me todte ho.<br>
                                    <span class="emphasis">Fourth step: embeddings.</span> Har chunk ka vector banega, numbers me convert hoga.<br>
                                    <span class="emphasis">Fifth step: indexing.</span> Chunks + embeddings search index me store karte ho.
                                </div>

                                <div class="script-para">
                                    Ab <span class="question">main point:</span> Ye decide kaun karega ki pehle fetch, fir normalize, fir chunk, fir embed, fir index?
                                </div>

                                <div class="script-para">
                                    Agar tumne services ko ek dusre ko call karwa diya na — "Fetcher chunker ko call kare", "chunker embedder ko call kare" — to tumhara system <span class="highlight">tight coupling</span> me chala jayega.<br>
                                    Kal ko chunking strategy change karoge, embedding service bhi touch karni padegi. <span class="emphasis">Debugging nightmare!</span>
                                </div>

                                <div class="script-para">
                                    Yahin pe aata hai <span class="highlight">Orchestrator Pattern</span>.<br>
                                    Orchestrator ka kaam simple hai: Wo khud kaam nahi karta. Wo sirf <span class="emphasis">director</span> hota hai.
                                </div>

                                <div class="script-para">
                                    Director bolta hai: "Step 1 run karo." "Agar fail hua, yahin stop." "Success? Step 2 pe jao."<br>
                                    <span class="highlight">Services sirf apna kaam karti hain. Unko workflow ka idea nahi hota.</span>
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Production takeaway:</span> Agar tumhare system me <span class="emphasis">workflow</span> hai — multiple steps, order matters, failure matters — to Orchestrator pattern tumhe clean code, easy testing, easy debugging, aur safe future changes deta hai.
                                </div>

                                <div class="script-para">
                                    <span class="emphasis">Bottom line:</span> "Services ko smart mat banao. Services ko single-purpose rakho. Workflow ko orchestrator ke under smart banao."
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Workflow Section -->
                    <div class="code-section">
                        <div class="section-header">
                            <div class="section-icon">🔄</div>
                            <div>
                                <div class="section-title">Ingestion Workflow — 5 Steps</div>
                                <div class="section-subtitle">Visual representation for reel</div>
                            </div>
                        </div>

                        <div class="workflow-visual">
                            <div class="workflow-step">
                                <div class="workflow-icon">📥</div>
                                <div class="workflow-label">Fetch</div>
                                <div class="workflow-desc">Raw content lao</div>
                            </div>
                            <div class="workflow-arrow">→</div>
                            <div class="workflow-step">
                                <div class="workflow-icon">🧹</div>
                                <div class="workflow-label">Normalize</div>
                                <div class="workflow-desc">Clean & format</div>
                            </div>
                            <div class="workflow-arrow">→</div>
                            <div class="workflow-step">
                                <div class="workflow-icon">✂️</div>
                                <div class="workflow-label">Chunk</div>
                                <div class="workflow-desc">Token-friendly parts</div>
                            </div>
                            <div class="workflow-arrow">→</div>
                            <div class="workflow-step">
                                <div class="workflow-icon">🔢</div>
                                <div class="workflow-label">Embed</div>
                                <div class="workflow-desc">Vector conversion</div>
                            </div>
                            <div class="workflow-arrow">→</div>
                            <div class="workflow-step">
                                <div class="workflow-icon">💾</div>
                                <div class="workflow-label">Index</div>
                                <div class="workflow-desc">Store for search</div>
                            </div>
                        </div>

                        <!-- Mermaid Orchestrator Architecture -->
                        <div class="mermaid-container" style="margin-top: 2rem;">
                            <div class="diagram-label">🏗️ Orchestrator Architecture</div>
                            <div class="mermaid">
flowchart TB
    subgraph ORCH[🎬 Ingestion Orchestrator]
        O[IngestAsync]
    end
    
    O --> F[📥 Fetcher]
    O --> N[🧹 Normalizer]
    O --> C[✂️ Chunker]
    O --> E[🔢 Embedder]
    O --> I[💾 Indexer]
    
    F -->|raw content| N
    N -->|clean content| C
    C -->|chunks| E
    E -->|vectors| I
    I -->|✅| R[Result]
    
    style ORCH fill:#1a1a28,stroke:#8338ec,stroke-width:3px,color:#fff
    style O fill:#1a1a28,stroke:#00f5d4,color:#fff
    style F fill:#1a1a28,stroke:#3a86ff,color:#fff
    style N fill:#1a1a28,stroke:#3a86ff,color:#fff
    style C fill:#1a1a28,stroke:#3a86ff,color:#fff
    style E fill:#1a1a28,stroke:#3a86ff,color:#fff
    style I fill:#1a1a28,stroke:#3a86ff,color:#fff
    style R fill:#1a1a28,stroke:#06d6a0,color:#fff
                            </div>
                        </div>

                        <!-- Tight Coupling vs Orchestrator Comparison -->
                        <div class="architecture-diagram">
                            <h4>⚔️ Tight Coupling vs Orchestrator — Visual Comparison</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- Tight Coupling -->
                                <div class="mermaid-container" style="border-color: rgba(239, 71, 111, 0.4);">
                                    <div class="diagram-label" style="background: rgba(239, 71, 111, 0.2); border-color: rgba(239, 71, 111, 0.4); color: #ef476f;">❌ Tight Coupling</div>
                                    <div class="mermaid">
flowchart TD
    F[Fetcher] -->|calls| N[Normalizer]
    N -->|calls| C[Chunker]
    C -->|calls| E[Embedder]
    E -->|calls| I[Indexer]
    
    F -.->|💀 knows about| N
    N -.->|💀 knows about| C
    C -.->|💀 knows about| E
    E -.->|💀 knows about| I
    
    style F fill:#2d1f1f,stroke:#ef476f,color:#fff
    style N fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C fill:#2d1f1f,stroke:#ef476f,color:#fff
    style E fill:#2d1f1f,stroke:#ef476f,color:#fff
    style I fill:#2d1f1f,stroke:#ef476f,color:#fff
                                    </div>
                                </div>

                                <!-- Orchestrator -->
                                <div class="mermaid-container" style="border-color: rgba(6, 214, 160, 0.4);">
                                    <div class="diagram-label" style="background: rgba(6, 214, 160, 0.2); border-color: rgba(6, 214, 160, 0.4); color: #06d6a0;">✅ Orchestrator</div>
                                    <div class="mermaid">
flowchart TD
    O[🎬 Orchestrator]
    O --> F[Fetcher]
    O --> N[Normalizer]
    O --> C[Chunker]
    O --> E[Embedder]
    O --> I[Indexer]
    
    style O fill:#1f2d1f,stroke:#06d6a0,stroke-width:3px,color:#fff
    style F fill:#1f2d1f,stroke:#3a86ff,color:#fff
    style N fill:#1f2d1f,stroke:#3a86ff,color:#fff
    style C fill:#1f2d1f,stroke:#3a86ff,color:#fff
    style E fill:#1f2d1f,stroke:#3a86ff,color:#fff
    style I fill:#1f2d1f,stroke:#3a86ff,color:#fff
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- RAG Query Flow -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🤖 RAG Query Flow</div>
                            <div class="mermaid">
sequenceDiagram
    participant U as 👤 User
    participant O as 🎬 RAG Orchestrator
    participant E as 🔢 Embedder
    participant V as 🔍 Vector Search
    participant P as 📝 Prompt Builder
    participant L as 🤖 LLM
    
    U->>O: "How does auth work?"
    O->>E: Embed query
    E-->>O: [0.23, -0.45, ...]
    O->>V: Search(vector, topK=5)
    V-->>O: [chunk1, chunk2, ...]
    O->>P: Build prompt
    P-->>O: System + Context + Query
    O->>L: Complete(prompt)
    L-->>O: "Auth uses JWT..."
    O-->>U: 📤 Answer
                            </div>
                        </div>
                    </div>

                    <!-- Code Section - Comparison -->
                    <div class="code-section">
                        <div class="section-header">
                            <div class="section-icon">💻</div>
                            <div>
                                <div class="section-title">Code Comparison — Tight Coupling vs Orchestrator</div>
                                <div class="section-subtitle">Show both in reel for impact</div>
                            </div>
                        </div>

                        <div class="code-comparison">
                            <!-- Naive Code -->
                            <div class="code-block naive">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label naive">❌ COUPLED</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Services calling each other 😱
class Fetcher {
    void Fetch() {
        var data = GetData();
        new Normalizer().Normalize(data); // 💀
    }
}

class Normalizer {
    void Normalize(string data) {
        var clean = Clean(data);
        new Chunker().Chunk(clean); // 💀
    }
}

// Change one → Break all!</code></pre>
                            </div>

                            <!-- Fixed Code -->
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label fixed">✅ ORCHESTRATOR</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Orchestrator controls workflow ✨
class IngestionOrchestrator {
    async Task Ingest(Source src) {
        var raw = await _fetcher.Fetch(src);
        var clean = _normalizer.Normalize(raw);
        var chunks = _chunker.Chunk(clean);
        var vectors = await _embedder.Embed(chunks);
        await _indexer.Index(vectors);
    }
}

// Services stay single-purpose!</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Full Code Section -->
                    <div class="full-code-section">
                        <div class="section-header">
                            <div class="section-icon">📦</div>
                            <div>
                                <div class="section-title">Complete Production Code</div>
                                <div class="section-subtitle">Screenshot-friendly, end-to-end RAG ingestion example</div>
                            </div>
                        </div>

                        <!-- Step 1: Service Interfaces -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">1</span>
                                <span class="step-title">Service Interfaces — Single Responsibility</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">IIngestionServices.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public interface IContentFetcher
{
    Task&lt;RawContent&gt; FetchAsync(SourceConfig source);
}

public interface INormalizer
{
    CleanContent Normalize(RawContent raw);
}

public interface IChunker
{
    List&lt;Chunk&gt; Chunk(CleanContent content);
}

public interface IEmbedder
{
    Task&lt;List&lt;EmbeddedChunk&gt;&gt; EmbedAsync(List&lt;Chunk&gt; chunks);
}

public interface IIndexer
{
    Task IndexAsync(List&lt;EmbeddedChunk&gt; vectors);
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 2: Orchestrator -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">2</span>
                                <span class="step-title">Ingestion Orchestrator — The Director</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">IngestionOrchestrator.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class IngestionOrchestrator
{
    private readonly IContentFetcher _fetcher;
    private readonly INormalizer _normalizer;
    private readonly IChunker _chunker;
    private readonly IEmbedder _embedder;
    private readonly IIndexer _indexer;
    private readonly ILogger&lt;IngestionOrchestrator&gt; _logger;

    public IngestionOrchestrator(
        IContentFetcher fetcher,
        INormalizer normalizer,
        IChunker chunker,
        IEmbedder embedder,
        IIndexer indexer,
        ILogger&lt;IngestionOrchestrator&gt; logger)
    {
        _fetcher = fetcher;
        _normalizer = normalizer;
        _chunker = chunker;
        _embedder = embedder;
        _indexer = indexer;
        _logger = logger;
    }

    public async Task&lt;IngestionResult&gt; IngestAsync(SourceConfig source)
    {
        try
        {
            // Step 1: Fetch raw content
            _logger.LogInformation("Step 1: Fetching from {Source}", source.Uri);
            var rawContent = await _fetcher.FetchAsync(source);

            // Step 2: Normalize content
            _logger.LogInformation("Step 2: Normalizing content");
            var cleanContent = _normalizer.Normalize(rawContent);

            // Step 3: Chunk into parts
            _logger.LogInformation("Step 3: Chunking content");
            var chunks = _chunker.Chunk(cleanContent);

            // Step 4: Generate embeddings
            _logger.LogInformation("Step 4: Generating embeddings for {Count} chunks", chunks.Count);
            var vectors = await _embedder.EmbedAsync(chunks);

            // Step 5: Index for search
            _logger.LogInformation("Step 5: Indexing vectors");
            await _indexer.IndexAsync(vectors);

            return IngestionResult.Success(chunks.Count);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Ingestion failed");
            return IngestionResult.Failure(ex.Message);
        }
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 3: RAG Orchestrator -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">3</span>
                                <span class="step-title">RAG Query Orchestrator — Same Pattern!</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">RAGOrchestrator.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class RAGOrchestrator
{
    private readonly IEmbedder _embedder;
    private readonly IVectorSearch _vectorSearch;
    private readonly IPromptBuilder _promptBuilder;
    private readonly ILLMClient _llmClient;

    public RAGOrchestrator(
        IEmbedder embedder,
        IVectorSearch vectorSearch,
        IPromptBuilder promptBuilder,
        ILLMClient llmClient)
    {
        _embedder = embedder;
        _vectorSearch = vectorSearch;
        _promptBuilder = promptBuilder;
        _llmClient = llmClient;
    }

    public async Task&lt;string&gt; QueryAsync(string userQuery)
    {
        // Step 1: Embed the query
        var queryVector = await _embedder.EmbedQueryAsync(userQuery);

        // Step 2: Vector search for relevant chunks
        var relevantChunks = await _vectorSearch.SearchAsync(queryVector, topK: 5);

        // Step 3: Build prompt with context
        var prompt = _promptBuilder.Build(userQuery, relevantChunks);

        // Step 4: Call LLM
        var answer = await _llmClient.CompleteAsync(prompt);

        return answer;
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 4: Usage -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">4</span>
                                <span class="step-title">DI Setup & Usage</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">Program.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Register services (each single-purpose)
builder.Services.AddScoped&lt;IContentFetcher, GitHubFetcher&gt;();
builder.Services.AddScoped&lt;INormalizer, MarkdownNormalizer&gt;();
builder.Services.AddScoped&lt;IChunker, SemanticChunker&gt;();
builder.Services.AddScoped&lt;IEmbedder, OpenAIEmbedder&gt;();
builder.Services.AddScoped&lt;IIndexer, PineconeIndexer&gt;();

// Register orchestrator
builder.Services.AddScoped&lt;IngestionOrchestrator&gt;();
builder.Services.AddScoped&lt;RAGOrchestrator&gt;();

// Usage in controller
[HttpPost("ingest")]
public async Task&lt;IActionResult&gt; Ingest(
    [FromBody] SourceConfig source,
    [FromServices] IngestionOrchestrator orchestrator)
{
    var result = await orchestrator.IngestAsync(source);
    return result.IsSuccess ? Ok(result) : BadRequest(result);
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Why orchestrator wins in production</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 Production Benefits</div>
                            <p class="takeaway-text">
                                <span class="highlight">Clean code</span> — Each service does ONE thing<br>
                                <span class="highlight">Easy testing</span> — Mock any service independently<br>
                                <span class="highlight">Easy debugging</span> — Logs show exact step that failed<br>
                                <span class="highlight">Safe changes</span> — Swap chunking strategy? Just replace <code>IChunker</code> impl!
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">RetryOrchestrator</span>
                                <span class="future-idea">ParallelIngestionOrchestrator</span>
                                <span class="future-idea">StreamingRAGOrchestrator</span>
                                <span class="future-idea">MultiTenantOrchestrator</span>
                            </div>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 BOTTOM LINE</div>
                            <p class="bottom-line-text">"Services ko smart mat banao. Services ko <span class="emphasis">single-purpose</span> rakho. Workflow ko orchestrator ke under <span class="emphasis">smart</span> banao."</p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #3: RESULT PATTERN ==================== -->
                <article class="reel-card" id="result-pattern" data-reel="3">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-result" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #03</span>
                                    <span class="reel-duration">⏱️ 45 sec</span>
                                    <span class="reel-category">Error Handling</span>
                                </div>
                                <h2 class="reel-header-title">Result Pattern — Exception Hell Se Bachao!</h2>
                                <p class="reel-header-subtitle">Expected failures ko exceptions mat banao — clean response return karo!</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #03</span>
                            <span class="reel-duration">⏱️ 45 sec</span>
                            <span class="reel-category">Error Handling</span>
                        </div>
                        <h2 class="reel-title">Result Pattern — Exception Hell Se Bachao!</h2>
                        <p class="reel-subtitle">Expected failures ko exceptions mat banao — clean response return karo!</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">Prod code me ek cheez sabse zyada common hoti hai — <strong>expected failures</strong>. Aur agar tum har expected failure pe exception throw kar rahe ho na, tumhara code try-catch ka jungle ban jaata hai.</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">45-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters — Exception cleanup!</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">Prod code me ek cheez sabse zyada common hoti hai — expected failures.</span><br>
                                    Aur agar tum har expected failure pe <span class="highlight">exception throw</span> kar rahe ho na, tumhara code <span class="emphasis">try-catch ka jungle</span> ban jaata hai. Aaj dekhte hain <span class="highlight">Result Pattern</span>.
                                </div>
                                
                                <div class="script-para">
                                    Suppose tumhari API <span class="emphasis">user profile fetch</span> karti hai.<br>
                                    User ne galat id bhej di. Ab tum kya karoge?
                                </div>

                                <div class="script-para">
                                    Agar tumne likha:<br>
                                    <code style="background: rgba(239, 71, 111, 0.2); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-red);">throw new Exception("User not found");</code><br><br>
                                    Toh problem kya hai? User not milna koi <span class="highlight">crash-worthy cheez nahi hai</span>, ye <span class="emphasis">expected case</span> hai.<br>
                                    Par exception throw hoga, logs noisy honge, aur controller me try-catch add karna padega.
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Result Pattern</span> kya bolta hai?<br>
                                    <span class="emphasis">"Exception mat phek, standard response return kar."</span>
                                </div>

                                <div class="script-para">
                                    Failure pe:<br>
                                    <code style="background: rgba(6, 214, 160, 0.2); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-green);">return Result&lt;User&gt;.Failure("User not found");</code><br><br>
                                    Success pe:<br>
                                    <code style="background: rgba(6, 214, 160, 0.2); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-green);">return Result&lt;User&gt;.Success(user);</code>
                                </div>

                                <div class="script-para">
                                    Caller side pe <span class="highlight">super clean</span>:<br>
                                    <code style="background: rgba(58, 134, 255, 0.2); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-blue);">if(!result.IsSuccess) return BadRequest(result.ErrorMessage);</code><br>
                                    <code style="background: rgba(58, 134, 255, 0.2); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-blue);">return Ok(result.Data);</code>
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Rule yaad rakhna:</span><br>
                                    <span class="emphasis">Expected failure → Result</span><br>
                                    <span class="emphasis">Unexpected bug → Exception</span><br><br>
                                    Bas. Code clean, predictable, <span class="highlight">production-ready</span>.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">Result Pattern flow & structure — powered by Mermaid.js</div>
                            </div>
                        </div>

                        <!-- Mermaid Class Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">📐 Result Pattern Structure</div>
                            <div class="mermaid">
classDiagram
    class Result~T~ {
        +bool IsSuccess
        +T Data
        +string ErrorMessage
        +string ErrorCode
        +Success(T data) Result~T~
        +Failure(string msg) Result~T~
    }
    
    class SuccessResult {
        IsSuccess = true ✅
        Data = user object
        ErrorMessage = null
    }
    
    class FailureResult {
        IsSuccess = false ❌
        Data = null
        ErrorMessage = "User not found"
    }
    
    Result~T~ <|-- SuccessResult : Success Path
    Result~T~ <|-- FailureResult : Failure Path
                            </div>
                        </div>

                        <!-- Flow Comparison Diagram -->
                        <div class="architecture-diagram">
                            <h4>🔄 Exception vs Result — Request Flow Comparison</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- Exception Approach -->
                                <div class="mermaid-container" style="border-color: rgba(239, 71, 111, 0.4);">
                                    <div class="diagram-label" style="background: rgba(239, 71, 111, 0.2); border-color: rgba(239, 71, 111, 0.4); color: #ef476f;">❌ Exception Approach</div>
                                    <div class="mermaid">
flowchart TD
    A[Controller] --> B[try block]
    B --> C[service.Get]
    C -->|throws| D[catch NotFoundException]
    C -->|throws| E[catch ValidationEx]
    C -->|throws| F[catch Exception]
    D --> G[return NotFound]
    E --> H[return BadRequest]
    F --> I[return ServerError]
    
    style A fill:#2d1f1f,stroke:#ef476f,color:#fff
    style B fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C fill:#2d1f1f,stroke:#ef476f,color:#fff
    style D fill:#2d1f1f,stroke:#ffbe0b,color:#fff
    style E fill:#2d1f1f,stroke:#ffbe0b,color:#fff
    style F fill:#2d1f1f,stroke:#ffbe0b,color:#fff
    style G fill:#2d1f1f,stroke:#ef476f,color:#fff
    style H fill:#2d1f1f,stroke:#ef476f,color:#fff
    style I fill:#2d1f1f,stroke:#ef476f,color:#fff
                                    </div>
                                </div>

                                <!-- Result Approach -->
                                <div class="mermaid-container" style="border-color: rgba(6, 214, 160, 0.4);">
                                    <div class="diagram-label" style="background: rgba(6, 214, 160, 0.2); border-color: rgba(6, 214, 160, 0.4); color: #06d6a0;">✅ Result Approach</div>
                                    <div class="mermaid">
flowchart TD
    A[Controller] --> B[var result = service.Get]
    B --> C{result.IsSuccess?}
    C -->|NO| D[return BadRequest]
    C -->|YES| E[return Ok - result.Data]
    
    style A fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style B fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style C fill:#1f2d1f,stroke:#8338ec,color:#fff
    style D fill:#1f2d1f,stroke:#ffbe0b,color:#fff
    style E fill:#1f2d1f,stroke:#06d6a0,color:#fff
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Decision Tree Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🤔 When to Use What?</div>
                            <div class="mermaid">
flowchart TD
    A[🚨 Failure Happened] --> B{Expected or Unexpected?}
    
    B -->|Expected Failure| C[Use Result Pattern]
    B -->|Unexpected Bug| D[Throw Exception]
    
    C --> E[User not found]
    C --> F[Invalid input]
    C --> G[Insufficient balance]
    C --> H[Duplicate email]
    
    D --> I[Database down 💥]
    D --> J[Null reference]
    D --> K[Out of memory]
    D --> L[Network timeout]
    
    style A fill:#1a1a28,stroke:#ff006e,color:#fff
    style B fill:#1a1a28,stroke:#8338ec,stroke-width:3px,color:#fff
    style C fill:#1a1a28,stroke:#06d6a0,stroke-width:2px,color:#fff
    style D fill:#1a1a28,stroke:#ef476f,stroke-width:2px,color:#fff
    style E fill:#1a1a28,stroke:#3a86ff,color:#fff
    style F fill:#1a1a28,stroke:#3a86ff,color:#fff
    style G fill:#1a1a28,stroke:#3a86ff,color:#fff
    style H fill:#1a1a28,stroke:#3a86ff,color:#fff
    style I fill:#1a1a28,stroke:#ef476f,color:#fff
    style J fill:#1a1a28,stroke:#ef476f,color:#fff
    style K fill:#1a1a28,stroke:#ef476f,color:#fff
    style L fill:#1a1a28,stroke:#ef476f,color:#fff
                            </div>
                        </div>
                    </div>

                    <!-- Code Section - Comparison -->
                    <div class="code-section">
                        <div class="section-header">
                            <div class="section-icon">💻</div>
                            <div>
                                <div class="section-title">Code Comparison — Exception Hell vs Result Pattern</div>
                                <div class="section-subtitle">Show both in reel for maximum impact</div>
                            </div>
                        </div>

                        <div class="code-comparison">
                            <!-- Naive Code -->
                            <div class="code-block naive">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label naive">❌ EXCEPTION</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Service Layer 💀
public User GetUser(int id)
{
    var user = _db.Users.Find(id);
    
    if (user == null)
        throw new Exception("User not found");
    
    return user;
}

// Controller 😱
public IActionResult Get(int id)
{
    try
    {
        var user = _service.GetUser(id);
        return Ok(user);
    }
    catch (Exception ex)
    {
        return NotFound(ex.Message);
    }
}</code></pre>
                            </div>

                            <!-- Fixed Code -->
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label fixed">✅ RESULT</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Service Layer ✨
public Result&lt;User&gt; GetUser(int id)
{
    var user = _db.Users.Find(id);
    
    if (user == null)
        return Result&lt;User&gt;.Failure("User not found");
    
    return Result&lt;User&gt;.Success(user);
}

// Controller 😊 (No try-catch!)
public IActionResult Get(int id)
{
    var result = _service.GetUser(id);
    
    if (!result.IsSuccess)
        return BadRequest(result.ErrorMessage);
    
    return Ok(result.Data);
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Full Code Section -->
                    <div class="full-code-section">
                        <div class="section-header">
                            <div class="section-icon">📦</div>
                            <div>
                                <div class="section-title">Complete Production Code</div>
                                <div class="section-subtitle">Screenshot-friendly, end-to-end Result pattern implementation</div>
                            </div>
                        </div>

                        <!-- Step 1: Result Class -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">1</span>
                                <span class="step-title">Generic Result&lt;T&gt; Class — The Foundation</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">Result.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class Result&lt;T&gt;
{
    public bool IsSuccess { get; private set; }
    public T? Data { get; private set; }
    public string? ErrorMessage { get; private set; }
    public string? ErrorCode { get; private set; }

    // Private constructor — force using static methods
    private Result() { }

    // ✅ Success factory method
    public static Result&lt;T&gt; Success(T data)
    {
        return new Result&lt;T&gt;
        {
            IsSuccess = true,
            Data = data,
            ErrorMessage = null
        };
    }

    // ❌ Failure factory method
    public static Result&lt;T&gt; Failure(string errorMessage, string? errorCode = null)
    {
        return new Result&lt;T&gt;
        {
            IsSuccess = false,
            Data = default,
            ErrorMessage = errorMessage,
            ErrorCode = errorCode
        };
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 2: Service Layer -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">2</span>
                                <span class="step-title">Service Layer — Returns Result Instead of Throwing</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">UserService.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class UserService : IUserService
{
    private readonly AppDbContext _db;

    public UserService(AppDbContext db) => _db = db;

    public async Task&lt;Result&lt;User&gt;&gt; GetByIdAsync(int id)
    {
        var user = await _db.Users.FindAsync(id);

        if (user == null)
            return Result&lt;User&gt;.Failure("User not found", "USER_NOT_FOUND");

        if (!user.IsActive)
            return Result&lt;User&gt;.Failure("User is deactivated", "USER_INACTIVE");

        return Result&lt;User&gt;.Success(user);
    }

    public async Task&lt;Result&lt;User&gt;&gt; CreateAsync(CreateUserDto dto)
    {
        // Validation
        if (string.IsNullOrEmpty(dto.Email))
            return Result&lt;User&gt;.Failure("Email is required", "VALIDATION_ERROR");

        // Check duplicate
        var exists = await _db.Users.AnyAsync(u => u.Email == dto.Email);
        if (exists)
            return Result&lt;User&gt;.Failure("Email already exists", "DUPLICATE_EMAIL");

        // Create user
        var user = new User { Email = dto.Email, Name = dto.Name };
        _db.Users.Add(user);
        await _db.SaveChangesAsync();

        return Result&lt;User&gt;.Success(user);
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 3: Controller -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">3</span>
                                <span class="step-title">Controller — Clean, No Try-Catch Needed!</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">UsersController.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">[ApiController]
[Route("api/[controller]")]
public class UsersController : ControllerBase
{
    private readonly IUserService _userService;

    public UsersController(IUserService userService)
        => _userService = userService;

    [HttpGet("{id}")]
    public async Task&lt;IActionResult&gt; Get(int id)
    {
        var result = await _userService.GetByIdAsync(id);

        if (!result.IsSuccess)
            return NotFound(new { error = result.ErrorMessage, code = result.ErrorCode });

        return Ok(result.Data);
    }

    [HttpPost]
    public async Task&lt;IActionResult&gt; Create([FromBody] CreateUserDto dto)
    {
        var result = await _userService.CreateAsync(dto);

        if (!result.IsSuccess)
            return BadRequest(new { error = result.ErrorMessage, code = result.ErrorCode });

        return CreatedAtAction(nameof(Get), new { id = result.Data!.Id }, result.Data);
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 4: Extension Methods -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">4</span>
                                <span class="step-title">Bonus: Fluent Extensions — Even Cleaner!</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">ResultExtensions.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public static class ResultExtensions
{
    // Convert Result to IActionResult automatically
    public static IActionResult ToActionResult&lt;T&gt;(this Result&lt;T&gt; result)
    {
        if (result.IsSuccess)
            return new OkObjectResult(result.Data);

        return new BadRequestObjectResult(new
        {
            error = result.ErrorMessage,
            code = result.ErrorCode
        });
    }

    // Map success value to another type
    public static Result&lt;TOut&gt; Map&lt;TIn, TOut&gt;(
        this Result&lt;TIn&gt; result,
        Func&lt;TIn, TOut&gt; mapper)
    {
        if (!result.IsSuccess)
            return Result&lt;TOut&gt;.Failure(result.ErrorMessage!, result.ErrorCode);

        return Result&lt;TOut&gt;.Success(mapper(result.Data!));
    }
}

// Usage in controller — ONE LINE! 🚀
[HttpGet("{id}")]
public async Task&lt;IActionResult&gt; Get(int id)
    => (await _userService.GetByIdAsync(id)).ToActionResult();</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Why Result Pattern wins in production</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 Production Benefits</div>
                            <p class="takeaway-text">
                                <span class="highlight">No try-catch jungle</span> — Controller stays clean!<br>
                                <span class="highlight">Type-safe errors</span> — Compiler helps you handle all cases<br>
                                <span class="highlight">Clean logs</span> — No stack traces for expected failures<br>
                                <span class="highlight">Better API responses</span> — Consistent error format with codes<br>
                                <span class="highlight">Easy testing</span> — No need to catch exceptions in tests!
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">Result&lt;T, TError&gt;</span>
                                <span class="future-idea">ValidationResult</span>
                                <span class="future-idea">PagedResult&lt;T&gt;</span>
                                <span class="future-idea">FluentResults NuGet</span>
                            </div>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 GOLDEN RULE</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">Expected failure</span> → Use <span class="emphasis">Result&lt;T&gt;</span><br>
                                <span class="emphasis">Unexpected bug</span> → Throw <span class="emphasis">Exception</span><br><br>
                                "Exceptions are for <span class="emphasis">exceptional</span> situations, not for normal business logic!"
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #4: REPOSITORY PATTERN ==================== -->
                <article class="reel-card" id="repository-pattern" data-reel="4">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-repository" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #04</span>
                                    <span class="reel-duration">⏱️ 50 sec</span>
                                    <span class="reel-category">Design Pattern</span>
                                </div>
                                <h2 class="reel-header-title">Repository Pattern — Netflix AI Recommendations</h2>
                                <p class="reel-header-subtitle">Database change ho jaaye, AI logic safe rahe! 🚀</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #04</span>
                            <span class="reel-duration">⏱️ 50 sec</span>
                            <span class="reel-category">Design Pattern</span>
                        </div>
                        <h2 class="reel-title">Repository Pattern — Netflix AI Recommendations</h2>
                        <p class="reel-subtitle">Database change ho jaaye, AI logic safe rahe! 🚀</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">Netflix ya Spotify jaisa AI recommendation system bana rahe ho?</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">50-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">Netflix ya Spotify jaisa AI recommendation system bana rahe ho?</span><br>
                                    User ne ek movie play ki, system ne <span class="highlight">embeddings</span> nikale, aur <span class="emphasis">"similar movies"</span> recommend karna start kar diya—sab smooth.
                                </div>
                                
                                <div class="script-para">
                                    Phir ek din product team bolti hai: <span class="emphasis">"Pinecone hatao, Azure AI Search use karna hai—cost aur compliance ke liye."</span>
                                </div>

                                <div class="script-para">
                                    Ab problem database change hone ki nahi hai. Problem ye hai ki tumhara <span class="highlight">recommendation logic directly Pinecone/Azure ke SDK</span> ko call kar raha hai. Har jagah <span class="emphasis">vendor-specific code</span> pada hai, toh change aaya toh poora codebase hil jayega.
                                </div>

                                <div class="script-para">
                                    Isko avoid karne ke liye use hota hai <span class="highlight">Repository Pattern.</span>
                                </div>

                                <div class="script-para">
                                    AI logic ko sirf itna bolna chahiye: <span class="emphasis">"mujhe similar items laa ke do."</span><br>
                                    Ye nahi pata hona chahiye ki backend Pinecone hai ya Azure.
                                </div>

                                <div class="script-para">
                                    Repository ek <span class="highlight">middle layer</span> hoti hai—AI system repository ko call karta hai, aur repository decide karti hai <span class="emphasis">data kaha se aayega.</span>
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Final takeaway:</span> DB change ho jaaye, AI logic safe rahe, aur testing bhi <span class="emphasis">easy ho jaati hai.</span> 🚀
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">Repository Pattern structure — powered by Mermaid.js</div>
                            </div>
                        </div>

                        <!-- Mermaid Class Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">📐 Repository Pattern UML</div>
                            <div class="mermaid">
classDiagram
    class IVectorRepository {
        &lt;&lt;interface&gt;&gt;
        +SearchSimilarAsync(embedding, topK) Task~List~Item~~
        +UpsertAsync(items) Task
        +DeleteAsync(id) Task
    }
    
    class PineconeRepository {
        +SearchSimilarAsync(embedding, topK) Task~List~Item~~
        +UpsertAsync(items) Task
        +DeleteAsync(id) Task
        Pinecone SDK 🌲
    }
    
    class AzureAISearchRepository {
        +SearchSimilarAsync(embedding, topK) Task~List~Item~~
        +UpsertAsync(items) Task
        +DeleteAsync(id) Task
        Azure SDK ☁️
    }
    
    class InMemoryRepository {
        +SearchSimilarAsync(embedding, topK) Task~List~Item~~
        +UpsertAsync(items) Task
        +DeleteAsync(id) Task
        Testing 🧪
    }
    
    class RecommendationService {
        -IVectorRepository _repository
        +GetSimilarMoviesAsync(movieId) Task~List~Movie~~
    }
    
    IVectorRepository <|.. PineconeRepository
    IVectorRepository <|.. AzureAISearchRepository
    IVectorRepository <|.. InMemoryRepository
    RecommendationService --> IVectorRepository : uses
    
    style IVectorRepository fill:#667eea,color:#fff
    style PineconeRepository fill:#1a1a28,stroke:#06d6a0,color:#fff
    style AzureAISearchRepository fill:#1a1a28,stroke:#3a86ff,color:#fff
    style InMemoryRepository fill:#1a1a28,stroke:#ffbe0b,color:#fff
    style RecommendationService fill:#1a1a28,stroke:#ff006e,color:#fff
                            </div>
                        </div>

                        <!-- Architecture Flow -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🔄 How Repository Pattern Works</div>
                            <div class="mermaid">
flowchart LR
    subgraph AI["🤖 AI LAYER"]
        RS[RecommendationService]
        RS --> |"GetSimilar()"| CALL["_repository.SearchSimilarAsync()"]
    end
    
    subgraph REPO["📦 REPOSITORY LAYER"]
        IR[IVectorRepository]
    end
    
    subgraph DB["💾 DATA LAYER"]
        P[🌲 Pinecone]
        A[☁️ Azure AI Search]
        M[🧪 In-Memory]
    end
    
    CALL --> IR
    IR -.-> P
    IR -.-> A
    IR -.-> M
    
    style RS fill:#ff006e,color:#fff
    style CALL fill:#8338ec,color:#fff
    style IR fill:#667eea,color:#fff
    style P fill:#06d6a0,color:#1a1a2e
    style A fill:#3a86ff,color:#fff
    style M fill:#ffbe0b,color:#1a1a2e
                            </div>
                        </div>

                        <!-- Comparison Diagram -->
                        <div class="architecture-diagram">
                            <h4>⚔️ Tight Coupling vs Repository — Visual Comparison</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- Tight Coupling -->
                                <div class="mermaid-container" style="border-color: rgba(239, 71, 111, 0.4);">
                                    <div class="diagram-label" style="background: rgba(239, 71, 111, 0.2); border-color: rgba(239, 71, 111, 0.4); color: #ef476f;">❌ Tight Coupling</div>
                                    <div class="mermaid">
flowchart TD
    A[RecommendationService] --> B[PineconeClient]
    A --> C[new PineconeClient]
    B --> D[Pinecone.Query]
    
    E["💀 Vendor Change = Rewrite Everything!"]
    
    style A fill:#2d1f1f,stroke:#ef476f,color:#fff
    style B fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C fill:#2d1f1f,stroke:#ef476f,color:#fff
    style D fill:#2d1f1f,stroke:#ef476f,color:#fff
    style E fill:#2d1f1f,stroke:#ef476f,color:#fff
                                    </div>
                                </div>

                                <!-- Repository Pattern -->
                                <div class="mermaid-container" style="border-color: rgba(6, 214, 160, 0.4);">
                                    <div class="diagram-label" style="background: rgba(6, 214, 160, 0.2); border-color: rgba(6, 214, 160, 0.4); color: #06d6a0;">✅ Repository Pattern</div>
                                    <div class="mermaid">
flowchart TD
    A[RecommendationService] --> B[IVectorRepository]
    B --> C[SearchSimilarAsync]
    
    D["✅ Vendor Change = Just Swap Implementation!"]
    
    style A fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style B fill:#1f2d1f,stroke:#667eea,color:#fff
    style C fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style D fill:#1f2d1f,stroke:#06d6a0,color:#fff
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Vendor Switch Flow -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🔄 Switching Vendors — Zero Code Change in AI Logic!</div>
                            <div class="mermaid">
sequenceDiagram
    participant RS as 🤖 RecommendationService
    participant IR as 📦 IVectorRepository
    participant P as 🌲 Pinecone (Old)
    participant A as ☁️ Azure (New)
    
    Note over RS,A: Day 1: Using Pinecone
    RS->>IR: SearchSimilarAsync(embedding)
    IR->>P: Query(embedding)
    P-->>IR: [movie1, movie2, ...]
    IR-->>RS: Similar movies!
    
    Note over RS,A: Day 100: Switch to Azure (just change DI config!)
    RS->>IR: SearchSimilarAsync(embedding)
    IR->>A: VectorSearch(embedding)
    A-->>IR: [movie1, movie2, ...]
    IR-->>RS: Same result, different backend!
                            </div>
                        </div>
                    </div>

                    <!-- Code Section - Comparison -->
                    <div class="code-section">
                        <div class="section-header">
                            <div class="section-icon">💻</div>
                            <div>
                                <div class="section-title">Code Comparison — Tight Coupling vs Repository</div>
                                <div class="section-subtitle">Show both in reel for impact</div>
                            </div>
                        </div>

                        <div class="code-comparison">
                            <!-- Naive Code -->
                            <div class="code-block naive">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label naive">❌ COUPLED</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// AI Service directly using Pinecone 💀
class RecommendationService
{
    private readonly PineconeClient _pinecone;

    public RecommendationService()
    {
        _pinecone = new PineconeClient("api-key");
    }

    public async Task&lt;List&lt;Movie&gt;&gt; GetSimilar(float[] embedding)
    {
        // Vendor-specific code everywhere!
        var results = await _pinecone.Index("movies")
            .Query(embedding, topK: 10);
        
        return results.Matches.Select(m => 
            new Movie { Id = m.Id }).ToList();
    }
}

// 💀 Change to Azure = Rewrite EVERYTHING!</code></pre>
                            </div>

                            <!-- Fixed Code -->
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label fixed">✅ REPOSITORY</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// AI Service uses interface ✨
class RecommendationService
{
    private readonly IVectorRepository _repo;

    public RecommendationService(IVectorRepository repo)
    {
        _repo = repo;
    }

    public async Task&lt;List&lt;Movie&gt;&gt; GetSimilar(float[] embedding)
    {
        // Clean! No vendor code here!
        return await _repo.SearchSimilarAsync(embedding, topK: 10);
    }
}

// ✅ Change to Azure = Just swap DI registration!</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Full Code Section -->
                    <div class="full-code-section">
                        <div class="section-header">
                            <div class="section-icon">📦</div>
                            <div>
                                <div class="section-title">Complete Production Code</div>
                                <div class="section-subtitle">Screenshot-friendly, end-to-end example</div>
                            </div>
                        </div>

                        <!-- Step 1: Interface -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">1</span>
                                <span class="step-title">Repository Interface — The Contract</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">IVectorRepository.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public interface IVectorRepository
{
    /// &lt;summary&gt;
    /// Search for similar items based on embedding vector
    /// &lt;/summary&gt;
    Task&lt;List&lt;VectorSearchResult&gt;&gt; SearchSimilarAsync(
        float[] embedding, 
        int topK = 10,
        Dictionary&lt;string, string&gt;? filters = null);

    /// &lt;summary&gt;
    /// Insert or update items with their embeddings
    /// &lt;/summary&gt;
    Task UpsertAsync(IEnumerable&lt;VectorItem&gt; items);

    /// &lt;summary&gt;
    /// Delete item by ID
    /// &lt;/summary&gt;
    Task DeleteAsync(string id);
}

public record VectorItem(string Id, float[] Embedding, Dictionary&lt;string, object&gt; Metadata);
public record VectorSearchResult(string Id, float Score, Dictionary&lt;string, object&gt; Metadata);</code></pre>
                            </div>
                        </div>

                        <!-- Step 2: Pinecone Implementation -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">2</span>
                                <span class="step-title">Pinecone Implementation — Concrete Repository</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">PineconeRepository.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class PineconeRepository : IVectorRepository
{
    private readonly PineconeClient _client;
    private readonly string _indexName;

    public PineconeRepository(string apiKey, string indexName)
    {
        _client = new PineconeClient(apiKey);
        _indexName = indexName;
    }

    public async Task&lt;List&lt;VectorSearchResult&gt;&gt; SearchSimilarAsync(
        float[] embedding, int topK = 10, Dictionary&lt;string, string&gt;? filters = null)
    {
        var index = _client.Index(_indexName);
        
        var response = await index.QueryAsync(new QueryRequest
        {
            Vector = embedding,
            TopK = topK,
            IncludeMetadata = true,
            Filter = filters
        });

        return response.Matches.Select(m => new VectorSearchResult(
            m.Id,
            m.Score,
            m.Metadata ?? new()
        )).ToList();
    }

    public async Task UpsertAsync(IEnumerable&lt;VectorItem&gt; items)
    {
        var index = _client.Index(_indexName);
        var vectors = items.Select(i => new Vector
        {
            Id = i.Id,
            Values = i.Embedding,
            Metadata = i.Metadata
        });
        
        await index.UpsertAsync(vectors);
    }

    public async Task DeleteAsync(string id)
    {
        var index = _client.Index(_indexName);
        await index.DeleteAsync(new[] { id });
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 3: Azure Implementation -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">3</span>
                                <span class="step-title">Azure AI Search Implementation — Easy Swap!</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">AzureAISearchRepository.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class AzureAISearchRepository : IVectorRepository
{
    private readonly SearchClient _client;

    public AzureAISearchRepository(string endpoint, string indexName, string apiKey)
    {
        _client = new SearchClient(
            new Uri(endpoint),
            indexName,
            new AzureKeyCredential(apiKey));
    }

    public async Task&lt;List&lt;VectorSearchResult&gt;&gt; SearchSimilarAsync(
        float[] embedding, int topK = 10, Dictionary&lt;string, string&gt;? filters = null)
    {
        var searchOptions = new SearchOptions
        {
            VectorSearch = new VectorSearchOptions
            {
                Queries = { new VectorizedQuery(embedding) { KNearestNeighborsCount = topK } }
            },
            Size = topK
        };

        var response = await _client.SearchAsync&lt;SearchDocument&gt;(null, searchOptions);

        var results = new List&lt;VectorSearchResult&gt;();
        await foreach (var result in response.Value.GetResultsAsync())
        {
            results.Add(new VectorSearchResult(
                result.Document["id"].ToString()!,
                (float)(result.Score ?? 0),
                result.Document.ToDictionary(k => k.Key, v => v.Value)
            ));
        }
        return results;
    }

    public async Task UpsertAsync(IEnumerable&lt;VectorItem&gt; items)
    {
        var documents = items.Select(i => {
            var doc = new SearchDocument { ["id"] = i.Id, ["vector"] = i.Embedding };
            foreach (var (key, value) in i.Metadata)
                doc[key] = value;
            return doc;
        });

        await _client.MergeOrUploadDocumentsAsync(documents);
    }

    public async Task DeleteAsync(string id)
    {
        await _client.DeleteDocumentsAsync("id", new[] { id });
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 4: Service Layer -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">4</span>
                                <span class="step-title">Recommendation Service — Clean AI Logic!</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">RecommendationService.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class RecommendationService
{
    private readonly IVectorRepository _vectorRepo;
    private readonly IEmbeddingService _embedder;
    private readonly IMovieRepository _movieRepo;

    public RecommendationService(
        IVectorRepository vectorRepo,
        IEmbeddingService embedder,
        IMovieRepository movieRepo)
    {
        _vectorRepo = vectorRepo;
        _embedder = embedder;
        _movieRepo = movieRepo;
    }

    public async Task&lt;List&lt;Movie&gt;&gt; GetSimilarMoviesAsync(int movieId, int count = 10)
    {
        // 1. Get the movie's embedding
        var movie = await _movieRepo.GetByIdAsync(movieId);
        var embedding = await _embedder.GetEmbeddingAsync(movie.Description);

        // 2. Search similar vectors — NO VENDOR CODE HERE! 🎉
        var similar = await _vectorRepo.SearchSimilarAsync(embedding, topK: count);

        // 3. Get movie details for results
        var movieIds = similar.Select(s => int.Parse(s.Id)).ToList();
        return await _movieRepo.GetByIdsAsync(movieIds);
    }

    public async Task IndexMovieAsync(Movie movie)
    {
        var embedding = await _embedder.GetEmbeddingAsync(movie.Description);
        
        await _vectorRepo.UpsertAsync(new[]
        {
            new VectorItem(
                movie.Id.ToString(),
                embedding,
                new Dictionary&lt;string, object&gt;
                {
                    ["title"] = movie.Title,
                    ["genre"] = movie.Genre,
                    ["year"] = movie.Year
                })
        });
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 5: DI Configuration -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">5</span>
                                <span class="step-title">DI Configuration — The Magic Switch!</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">Program.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">var builder = WebApplication.CreateBuilder(args);

// 🔄 Switch vendors with ONE LINE change!
var vectorProvider = builder.Configuration["VectorDb:Provider"];

if (vectorProvider == "Pinecone")
{
    builder.Services.AddSingleton&lt;IVectorRepository&gt;(sp =>
        new PineconeRepository(
            builder.Configuration["Pinecone:ApiKey"]!,
            builder.Configuration["Pinecone:Index"]!));
}
else if (vectorProvider == "Azure")
{
    builder.Services.AddSingleton&lt;IVectorRepository&gt;(sp =>
        new AzureAISearchRepository(
            builder.Configuration["Azure:Endpoint"]!,
            builder.Configuration["Azure:Index"]!,
            builder.Configuration["Azure:ApiKey"]!));
}
else // Testing
{
    builder.Services.AddSingleton&lt;IVectorRepository, InMemoryVectorRepository&gt;();
}

// Service layer doesn't change at all! 🎉
builder.Services.AddScoped&lt;RecommendationService&gt;();

var app = builder.Build();</code></pre>
                            </div>
                        </div>

                        <!-- Step 6: In-Memory for Testing -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">6</span>
                                <span class="step-title">Bonus: In-Memory Repository for Testing</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">InMemoryVectorRepository.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class InMemoryVectorRepository : IVectorRepository
{
    private readonly ConcurrentDictionary&lt;string, VectorItem&gt; _store = new();

    public Task&lt;List&lt;VectorSearchResult&gt;&gt; SearchSimilarAsync(
        float[] embedding, int topK = 10, Dictionary&lt;string, string&gt;? filters = null)
    {
        // Simple cosine similarity for testing
        var results = _store.Values
            .Select(item => new
            {
                Item = item,
                Score = CosineSimilarity(embedding, item.Embedding)
            })
            .OrderByDescending(x => x.Score)
            .Take(topK)
            .Select(x => new VectorSearchResult(x.Item.Id, x.Score, x.Item.Metadata))
            .ToList();

        return Task.FromResult(results);
    }

    public Task UpsertAsync(IEnumerable&lt;VectorItem&gt; items)
    {
        foreach (var item in items)
            _store[item.Id] = item;
        return Task.CompletedTask;
    }

    public Task DeleteAsync(string id)
    {
        _store.TryRemove(id, out _);
        return Task.CompletedTask;
    }

    private static float CosineSimilarity(float[] a, float[] b)
    {
        var dot = a.Zip(b, (x, y) => x * y).Sum();
        var magA = Math.Sqrt(a.Sum(x => x * x));
        var magB = Math.Sqrt(b.Sum(x => x * x));
        return (float)(dot / (magA * magB));
    }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Why Repository Pattern is essential for AI systems</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 Production Benefits</div>
                            <p class="takeaway-text">
                                <span class="highlight">Vendor Independence</span> — Switch Pinecone ↔ Azure ↔ Qdrant without touching AI code!<br>
                                <span class="highlight">Easy Testing</span> — Use InMemoryRepository for unit tests<br>
                                <span class="highlight">Clean Architecture</span> — AI logic knows nothing about databases<br>
                                <span class="highlight">Future-Proof</span> — New vector DB comes out? Just add new implementation!<br>
                                <span class="highlight">Cost Optimization</span> — Switch vendors for better pricing anytime
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">QdrantRepository</span>
                                <span class="future-idea">WeaviateRepository</span>
                                <span class="future-idea">ChromaRepository</span>
                                <span class="future-idea">MilvusRepository</span>
                            </div>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 GOLDEN RULE</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">AI Logic</span> → "Mujhe similar items chahiye"<br>
                                <span class="emphasis">Repository</span> → "Main decide karunga kahan se laana hai"<br><br>
                                "Database change ho jaaye, AI logic safe rahe!" 🚀
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #5: SEPARATION OF CONCERNS ==================== -->
                <article class="reel-card" id="separation-of-concerns" data-reel="5">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-soc" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #05</span>
                                    <span class="reel-duration">⏱️ 45 sec</span>
                                    <span class="reel-category">Architecture Principle</span>
                                </div>
                                <h2 class="reel-header-title">Separation of Concerns — Interview Ready Answer</h2>
                                <p class="reel-header-subtitle">SoC = macro level, SRP = micro level — dono alag hai!</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #05</span>
                            <span class="reel-duration">⏱️ 45 sec</span>
                            <span class="reel-category">Architecture Principle</span>
                        </div>
                        <h2 class="reel-title">Separation of Concerns — Interview Ready Answer</h2>
                        <p class="reel-subtitle">SoC = macro level, SRP = micro level — dono alag hai!</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">Interview me pooche: "Separation of Concerns kya hota hai?" — Aur tum bol do "code ko alag files me rakhna" — interviewer bolega <strong>WHY</strong>.</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">45-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">Interview me pooche: "Separation of Concerns kya hota hai?"</span><br>
                                    Aur tum bol do <span class="emphasis">"code ko alag files me rakhna"</span> — interviewer bolega <span class="highlight">WHY</span>.
                                </div>
                                
                                <div class="script-para">
                                    Chalo 45 sec me proper samjho.
                                </div>

                                <div class="script-para">
                                    Suppose tum ek <span class="highlight">User Profile Update API</span> bana rahe ho. Request aayi: <span class="emphasis">validate</span> karo, <span class="emphasis">business rules</span> lagao (jaise email change allowed hai ya nahi), <span class="emphasis">DB me save</span> karo, aur response do.
                                </div>

                                <div class="script-para">
                                    Ab agar tumne ye sab <span class="highlight">Controller ke andar</span> kar diya—validation bhi, rules bhi, DB calls bhi—to kal ko <span class="emphasis">DB schema change</span> hua to controller change, kal ko <span class="emphasis">business rule change</span> hua to controller change, kal ko <span class="emphasis">API contract change</span> hua to again same file. Ye hai <span class="highlight">concerns mixed</span>—SoC violation.
                                </div>

                                <div class="script-para">
                                    <span class="highlight">SoC bolta hai:</span><br>
                                    <span class="emphasis">Controller</span> sirf HTTP in/out, <span class="emphasis">Service</span> sirf business logic, <span class="emphasis">Repository</span> sirf DB access, aur <span class="emphasis">Middleware</span> logging/error handling.<br>
                                    Ab change <span class="highlight">isolated</span> ho gaya.
                                </div>

                                <div class="script-para">
                                    Aur ek confusion: <span class="highlight">SRP vs SoC</span>.<br>
                                    <span class="emphasis">SRP</span> class level rule hai—<em>one class, one reason to change.</em><br>
                                    <span class="emphasis">SoC</span> architecture level rule hai—UI/Controller, business, data ko separate karo.<br>
                                    <span class="highlight">SoC = macro, SRP = micro.</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">Separation of Concerns — Layered Architecture</div>
                            </div>
                        </div>

                        <!-- SoC Architecture Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">📐 Separation of Concerns Architecture</div>
                            <div class="mermaid">
flowchart TB
    subgraph Presentation["🎨 PRESENTATION LAYER"]
        C[Controller]
        M[Middleware]
    end
    
    subgraph Business["💼 BUSINESS LAYER"]
        S[Service]
        V[Validator]
    end
    
    subgraph Data["💾 DATA LAYER"]
        R[Repository]
        DB[(Database)]
    end
    
    C --> S
    M --> C
    S --> V
    S --> R
    R --> DB
    
    style C fill:#667eea,color:#fff
    style M fill:#8338ec,color:#fff
    style S fill:#06d6a0,color:#1a1a2e
    style V fill:#00f5d4,color:#1a1a2e
    style R fill:#3a86ff,color:#fff
    style DB fill:#ff006e,color:#fff
                            </div>
                        </div>

                        <!-- Bad vs Good Comparison -->
                        <div class="architecture-diagram">
                            <h4>⚔️ Mixed Concerns vs Separated Concerns</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- Mixed Concerns -->
                                <div class="mermaid-container" style="border-color: rgba(239, 71, 111, 0.4);">
                                    <div class="diagram-label" style="background: rgba(239, 71, 111, 0.2); border-color: rgba(239, 71, 111, 0.4); color: #ef476f;">❌ Mixed Concerns</div>
                                    <div class="mermaid">
flowchart TD
    A[Controller] --> B[Validate Input]
    A --> C[Apply Business Rules]
    A --> D[Connect to DB]
    A --> E[Execute Query]
    A --> F[Map Response]
    A --> G[Log Everything]
    
    H["💀 One file doing EVERYTHING!"]
    
    style A fill:#2d1f1f,stroke:#ef476f,color:#fff
    style B fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C fill:#2d1f1f,stroke:#ef476f,color:#fff
    style D fill:#2d1f1f,stroke:#ef476f,color:#fff
    style E fill:#2d1f1f,stroke:#ef476f,color:#fff
    style F fill:#2d1f1f,stroke:#ef476f,color:#fff
    style G fill:#2d1f1f,stroke:#ef476f,color:#fff
    style H fill:#2d1f1f,stroke:#ef476f,color:#fff
                                    </div>
                                </div>

                                <!-- Separated Concerns -->
                                <div class="mermaid-container" style="border-color: rgba(6, 214, 160, 0.4);">
                                    <div class="diagram-label" style="background: rgba(6, 214, 160, 0.2); border-color: rgba(6, 214, 160, 0.4); color: #06d6a0;">✅ Separated Concerns</div>
                                    <div class="mermaid">
flowchart TD
    A[Controller] -->|HTTP| B[Service]
    B -->|Logic| C[Validator]
    B -->|Data| D[Repository]
    E[Middleware] -->|Logs| A
    
    F["✅ Each layer = One responsibility!"]
    
    style A fill:#1f2d1f,stroke:#667eea,color:#fff
    style B fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style C fill:#1f2d1f,stroke:#00f5d4,color:#fff
    style D fill:#1f2d1f,stroke:#3a86ff,color:#fff
    style E fill:#1f2d1f,stroke:#8338ec,color:#fff
    style F fill:#1f2d1f,stroke:#06d6a0,color:#fff
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SRP vs SoC Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🎯 SRP vs SoC — The Difference</div>
                            <div class="mermaid">
flowchart LR
    subgraph SRP["🔬 SRP - MICRO LEVEL"]
        direction TB
        S1["Class Level"]
        S2["One class = One reason to change"]
        S3["UserValidator only validates"]
    end
    
    subgraph SoC["🏗️ SoC - MACRO LEVEL"]
        direction TB
        C1["Architecture Level"]
        C2["Separate UI, Business, Data"]
        C3["Layers don't mix responsibilities"]
    end
    
    SRP ---|"Both work together!"| SoC
    
    style S1 fill:#ffbe0b,color:#1a1a2e
    style S2 fill:#ffbe0b,color:#1a1a2e
    style S3 fill:#ffbe0b,color:#1a1a2e
    style C1 fill:#667eea,color:#fff
    style C2 fill:#667eea,color:#fff
    style C3 fill:#667eea,color:#fff
                            </div>
                        </div>
                    </div>

                    <!-- Code Section - Comparison -->
                    <div class="code-section">
                        <div class="section-header">
                            <div class="section-icon">💻</div>
                            <div>
                                <div class="section-title">Code Comparison — Mixed vs Separated</div>
                                <div class="section-subtitle">Show both in reel for impact</div>
                            </div>
                        </div>

                        <div class="code-comparison">
                            <!-- Bad Code -->
                            <div class="code-block naive">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label naive">❌ MIXED</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Controller doing EVERYTHING 💀
[HttpPut("profile")]
public async Task&lt;IActionResult&gt; UpdateProfile(ProfileDto dto)
{
    // Validation 😱
    if (string.IsNullOrEmpty(dto.Email))
        return BadRequest("Email required");
    
    // Business rules 😱
    var user = await _db.Users.FindAsync(dto.Id);
    if (user.Email != dto.Email && !user.CanChangeEmail)
        return BadRequest("Cannot change email");
    
    // DB operations 😱
    user.Name = dto.Name;
    user.Email = dto.Email;
    await _db.SaveChangesAsync();
    
    // Logging 😱
    _logger.Log($"Profile updated: {dto.Id}");
    
    return Ok(user);
}</code></pre>
                            </div>

                            <!-- Good Code -->
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label fixed">✅ SEPARATED</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Controller = HTTP only ✨
[HttpPut("profile")]
public async Task&lt;IActionResult&gt; UpdateProfile(ProfileDto dto)
{
    var result = await _profileService.UpdateAsync(dto);
    
    if (!result.IsSuccess)
        return BadRequest(result.Error);
    
    return Ok(result.Data);
}

// Service = Business logic only ✨
// Repository = DB only ✨
// Middleware = Logging only ✨</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Full Code Section -->
                    <div class="full-code-section">
                        <div class="section-header">
                            <div class="section-icon">📦</div>
                            <div>
                                <div class="section-title">Complete Production Code</div>
                                <div class="section-subtitle">Properly separated layers</div>
                            </div>
                        </div>

                        <!-- Step 1: Controller -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">1</span>
                                <span class="step-title">Controller — HTTP In/Out Only</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">ProfileController.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">[ApiController]
[Route("api/[controller]")]
public class ProfileController : ControllerBase
{
    private readonly IProfileService _profileService;

    public ProfileController(IProfileService profileService)
        => _profileService = profileService;

    [HttpGet("{id}")]
    public async Task&lt;IActionResult&gt; Get(int id)
    {
        var result = await _profileService.GetByIdAsync(id);
        return result.IsSuccess ? Ok(result.Data) : NotFound(result.Error);
    }

    [HttpPut]
    public async Task&lt;IActionResult&gt; Update([FromBody] UpdateProfileDto dto)
    {
        var result = await _profileService.UpdateAsync(dto);
        return result.IsSuccess ? Ok(result.Data) : BadRequest(result.Error);
    }
}

// ✅ Controller knows NOTHING about:
// - How validation works
// - What business rules exist
// - How data is stored</code></pre>
                            </div>
                        </div>

                        <!-- Step 2: Service -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">2</span>
                                <span class="step-title">Service — Business Logic Only</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">ProfileService.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class ProfileService : IProfileService
{
    private readonly IUserRepository _userRepo;
    private readonly IProfileValidator _validator;

    public ProfileService(IUserRepository userRepo, IProfileValidator validator)
    {
        _userRepo = userRepo;
        _validator = validator;
    }

    public async Task&lt;Result&lt;User&gt;&gt; UpdateAsync(UpdateProfileDto dto)
    {
        // Validate input
        var validation = _validator.Validate(dto);
        if (!validation.IsValid)
            return Result&lt;User&gt;.Failure(validation.Error);

        // Get existing user
        var user = await _userRepo.GetByIdAsync(dto.Id);
        if (user == null)
            return Result&lt;User&gt;.Failure("User not found");

        // Business rule: Can user change email?
        if (user.Email != dto.Email && !user.CanChangeEmail)
            return Result&lt;User&gt;.Failure("Email change not allowed");

        // Update and save
        user.Name = dto.Name;
        user.Email = dto.Email;
        await _userRepo.UpdateAsync(user);

        return Result&lt;User&gt;.Success(user);
    }
}

// ✅ Service knows NOTHING about:
// - HTTP status codes
// - Database queries
// - Logging</code></pre>
                            </div>
                        </div>

                        <!-- Step 3: Repository -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">3</span>
                                <span class="step-title">Repository — Data Access Only</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">UserRepository.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class UserRepository : IUserRepository
{
    private readonly AppDbContext _db;

    public UserRepository(AppDbContext db) => _db = db;

    public async Task&lt;User?&gt; GetByIdAsync(int id)
        => await _db.Users.FindAsync(id);

    public async Task&lt;User?&gt; GetByEmailAsync(string email)
        => await _db.Users.FirstOrDefaultAsync(u => u.Email == email);

    public async Task UpdateAsync(User user)
    {
        _db.Users.Update(user);
        await _db.SaveChangesAsync();
    }

    public async Task&lt;bool&gt; ExistsAsync(int id)
        => await _db.Users.AnyAsync(u => u.Id == id);
}

// ✅ Repository knows NOTHING about:
// - Business rules (can email change?)
// - HTTP requests
// - Validation logic</code></pre>
                            </div>
                        </div>

                        <!-- Step 4: Validator -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">4</span>
                                <span class="step-title">Validator — Validation Only</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">ProfileValidator.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class ProfileValidator : IProfileValidator
{
    public ValidationResult Validate(UpdateProfileDto dto)
    {
        var errors = new List&lt;string&gt;();

        if (string.IsNullOrWhiteSpace(dto.Name))
            errors.Add("Name is required");

        if (string.IsNullOrWhiteSpace(dto.Email))
            errors.Add("Email is required");
        else if (!IsValidEmail(dto.Email))
            errors.Add("Invalid email format");

        if (dto.Name?.Length > 100)
            errors.Add("Name too long (max 100 chars)");

        return errors.Any()
            ? ValidationResult.Fail(string.Join(", ", errors))
            : ValidationResult.Ok();
    }

    private bool IsValidEmail(string email)
        => Regex.IsMatch(email, @"^[^@\s]+@[^@\s]+\.[^@\s]+$");
}

// ✅ Validator knows NOTHING about:
// - Database
// - Business rules
// - HTTP</code></pre>
                            </div>
                        </div>

                        <!-- Step 5: Middleware -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">5</span>
                                <span class="step-title">Middleware — Cross-Cutting Concerns</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">LoggingMiddleware.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class LoggingMiddleware
{
    private readonly RequestDelegate _next;
    private readonly ILogger&lt;LoggingMiddleware&gt; _logger;

    public LoggingMiddleware(RequestDelegate next, ILogger&lt;LoggingMiddleware&gt; logger)
    {
        _next = next;
        _logger = logger;
    }

    public async Task InvokeAsync(HttpContext context)
    {
        var stopwatch = Stopwatch.StartNew();
        
        _logger.LogInformation(
            "Request: {Method} {Path}",
            context.Request.Method,
            context.Request.Path);

        await _next(context);

        stopwatch.Stop();
        _logger.LogInformation(
            "Response: {StatusCode} in {ElapsedMs}ms",
            context.Response.StatusCode,
            stopwatch.ElapsedMilliseconds);
    }
}

// ✅ Middleware knows NOTHING about:
// - Business logic
// - Specific controllers
// - Database</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Interview-ready points</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 Why Separation of Concerns?</div>
                            <p class="takeaway-text">
                                <span class="highlight">Isolated Changes</span> — DB change? Only Repository changes!<br>
                                <span class="highlight">Easy Testing</span> — Mock each layer independently<br>
                                <span class="highlight">Team Scalability</span> — Frontend team works on Controller, Backend on Service<br>
                                <span class="highlight">Maintainability</span> — Find bugs faster, fix in one place<br>
                                <span class="highlight">Reusability</span> — Same Service for API + CLI + Background jobs
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">Clean Architecture</span>
                                <span class="future-idea">Hexagonal Architecture</span>
                                <span class="future-idea">Onion Architecture</span>
                                <span class="future-idea">CQRS Pattern</span>
                            </div>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 INTERVIEW ANSWER</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">SRP</span> = Class level — One class, one reason to change<br>
                                <span class="emphasis">SoC</span> = Architecture level — Separate UI, Business, Data layers<br><br>
                                "SoC = macro, SRP = micro — dono saath me kaam karte hain!" 🚀
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #6: SINGLETON PATTERN ==================== -->
                <article class="reel-card" id="singleton-pattern" data-reel="6">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-singleton" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #06</span>
                                    <span class="reel-duration">⏱️ 45 sec</span>
                                    <span class="reel-category">Design Pattern</span>
                                </div>
                                <h2 class="reel-header-title">Singleton Pattern — Azure OpenAI Client Optimization</h2>
                                <p class="reel-header-subtitle">Ek class ka sirf ek instance — memory stable, system scalable! 🚀</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #06</span>
                            <span class="reel-duration">⏱️ 45 sec</span>
                            <span class="reel-category">Design Pattern</span>
                        </div>
                        <h2 class="reel-title">Singleton Pattern — Azure OpenAI Client Optimization</h2>
                        <p class="reel-subtitle">Ek class ka sirf ek instance — memory stable, system scalable! 🚀</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">Production me har request pe naya OpenAI client bana rahe ho? Memory leak aur socket exhaustion ka seedha raasta!</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">45-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">Suppose tum ek production system pe kaam kar rahe ho jahan tum Azure OpenAI ya koi heavy SDK client use kar rahe ho.</span><br>
                                    Ab kya hota hai normally? Har incoming request pe tum <span class="highlight">new client</span> bana dete ho. Ek request aayi, naya object. Dusri request aayi, fir se naya object. Thodi der me <span class="emphasis">memory badhne lagti hai</span>, sockets open ho jaati hain aur system slow ho jata hai.
                                </div>
                                
                                <div class="script-para">
                                    Ab agar interview me aapse poocha jaaye – <span class="highlight">"Isko kaise optimize karoge?"</span><br>
                                    Answer hai <span class="emphasis">Singleton Pattern</span>.
                                </div>

                                <div class="script-para">
                                    Singleton ka simple matlab ye hai ki poori application me us class ka <span class="highlight">sirf ek hi instance</span> banega. Tum jitni baar bhi maango, wahi same instance milega.
                                </div>

                                <div class="script-para">
                                    Real .NET apps me hum <span class="emphasis">static use nahi karte</span>, hum <span class="highlight">DI container</span> use karte hain. Jaise:<br>
                                    <code style="background: rgba(58, 134, 255, 0.2); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-blue);">services.AddSingleton&lt;OpenAIClient&gt;()</code>
                                </div>

                                <div class="script-para">
                                    Ab first request pe client create hota hai, aur baaki sab requests ko <span class="highlight">wahi same client</span> milta hai. Isse object creation ka cost bachta hai, memory stable rehti hai aur <span class="emphasis">system scalable</span> banta hai.
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Interview me yaad rakhna:</span><br>
                                    Singleton sirf <span class="emphasis">stateless, thread-safe, shared services</span> ke liye hota hai.<br>
                                    DbContext ya user data ko <span class="emphasis">kabhi Singleton mat banana</span>.
                                </div>

                                <div class="script-para" style="margin-top: 1rem; padding: 1rem; background: rgba(6, 214, 160, 0.1); border-radius: 8px; border-left: 3px solid var(--accent-green);">
                                    <span class="highlight">✅ Singleton Examples:</span><br>
                                    • <span class="emphasis">OpenAIClient / AzureOpenAIClient</span> — SDK clients<br>
                                    • <span class="emphasis">HttpClient</span> — Connection pooling<br>
                                    • <span class="emphasis">IMemoryCache / Redis Client</span> — Caching<br>
                                    • <span class="emphasis">IConfiguration</span> — App settings<br>
                                    • <span class="emphasis">ILoggerFactory</span> — Logging<br>
                                    • <span class="emphasis">BlobServiceClient</span> — Azure Storage<br>
                                    • <span class="emphasis">CosmosClient</span> — Cosmos DB<br>
                                    • <span class="emphasis">SearchClient</span> — Azure AI Search
                                </div>

                                <div class="script-para" style="margin-top: 0.5rem; padding: 1rem; background: rgba(239, 71, 111, 0.1); border-radius: 8px; border-left: 3px solid var(--accent-red);">
                                    <span class="highlight">❌ NEVER Singleton:</span><br>
                                    • <span class="emphasis">DbContext</span> — Tracks entities, not thread-safe<br>
                                    • <span class="emphasis">UserSession / CurrentUser</span> — Per-user data<br>
                                    • <span class="emphasis">ShoppingCart</span> — Per-request state<br>
                                    • <span class="emphasis">UnitOfWork</span> — Transaction scope<br>
                                    • <span class="emphasis">RequestContext</span> — Request-specific
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">Singleton Pattern — One Instance, Many Consumers</div>
                            </div>
                        </div>

                        <!-- Singleton Concept Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">📐 Singleton Pattern Concept</div>
                            <div class="mermaid">
flowchart TB
    subgraph Requests["📨 INCOMING REQUESTS"]
        R1[Request 1]
        R2[Request 2]
        R3[Request 3]
        R4[Request N...]
    end
    
    subgraph DI["📦 DI CONTAINER"]
        S["🎯 Singleton Instance\nOpenAIClient"]
    end
    
    subgraph External["☁️ AZURE"]
        API[Azure OpenAI API]
    end
    
    R1 --> S
    R2 --> S
    R3 --> S
    R4 --> S
    S --> API
    
    style R1 fill:#667eea,color:#fff
    style R2 fill:#667eea,color:#fff
    style R3 fill:#667eea,color:#fff
    style R4 fill:#667eea,color:#fff
    style S fill:#06d6a0,color:#1a1a2e,stroke-width:3px
    style API fill:#ff006e,color:#fff
                            </div>
                        </div>

                        <!-- Bad vs Good Comparison -->
                        <div class="architecture-diagram">
                            <h4>⚔️ New Instance Every Time vs Singleton</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- New Instance Every Time -->
                                <div class="mermaid-container" style="border-color: rgba(239, 71, 111, 0.4);">
                                    <div class="diagram-label" style="background: rgba(239, 71, 111, 0.2); border-color: rgba(239, 71, 111, 0.4); color: #ef476f;">❌ New Instance Every Request</div>
                                    <div class="mermaid">
flowchart TD
    R1[Request 1] --> C1[new OpenAIClient]
    R2[Request 2] --> C2[new OpenAIClient]
    R3[Request 3] --> C3[new OpenAIClient]
    
    M["💀 Memory Leak!\n🔌 Socket Exhaustion!\n🐢 Slow Performance!"]
    
    style R1 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style R2 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style R3 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C1 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C2 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C3 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style M fill:#2d1f1f,stroke:#ef476f,color:#fff
                                    </div>
                                </div>

                                <!-- Singleton -->
                                <div class="mermaid-container" style="border-color: rgba(6, 214, 160, 0.4);">
                                    <div class="diagram-label" style="background: rgba(6, 214, 160, 0.2); border-color: rgba(6, 214, 160, 0.4); color: #06d6a0;">✅ Singleton Pattern</div>
                                    <div class="mermaid">
flowchart TD
    R1[Request 1] --> S["🎯 Single OpenAIClient"]
    R2[Request 2] --> S
    R3[Request 3] --> S
    
    M["✅ Memory Stable!\n✅ Connection Reused!\n✅ Fast & Scalable!"]
    
    style R1 fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style R2 fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style R3 fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style S fill:#1f2d1f,stroke:#06d6a0,stroke-width:3px,color:#fff
    style M fill:#1f2d1f,stroke:#06d6a0,color:#fff
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- DI Lifetimes Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🔄 .NET DI Service Lifetimes</div>
                            <div class="mermaid">
flowchart LR
    subgraph Transient["🔄 TRANSIENT"]
        T1["New instance EVERY time"]
        T2["Use for: Lightweight, stateless"]
    end
    
    subgraph Scoped["📦 SCOPED"]
        S1["One instance PER REQUEST"]
        S2["Use for: DbContext, UnitOfWork"]
    end
    
    subgraph Singleton["🎯 SINGLETON"]
        SI1["One instance FOR APP LIFETIME"]
        SI2["Use for: HttpClient, SDK Clients"]
    end
    
    style T1 fill:#ffbe0b,color:#1a1a2e
    style T2 fill:#ffbe0b,color:#1a1a2e
    style S1 fill:#8338ec,color:#fff
    style S2 fill:#8338ec,color:#fff
    style SI1 fill:#06d6a0,color:#1a1a2e
    style SI2 fill:#06d6a0,color:#1a1a2e
                            </div>
                        </div>
                    </div>

                    <!-- Code Section - Comparison -->
                    <div class="code-section">
                        <div class="section-header">
                            <div class="section-icon">💻</div>
                            <div>
                                <div class="section-title">Code Comparison — New Every Time vs Singleton</div>
                                <div class="section-subtitle">Show both in reel for impact</div>
                            </div>
                        </div>

                        <div class="code-comparison">
                            <!-- Bad Code -->
                            <div class="code-block naive">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label naive">❌ NEW EVERY TIME</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Creating new client on every request 💀
public class ChatService
{
    public async Task&lt;string&gt; GetResponseAsync(string prompt)
    {
        // 💀 New client every time!
        var client = new OpenAIClient(
            new Uri(endpoint),
            new AzureKeyCredential(apiKey));
        
        var response = await client.GetChatCompletionsAsync(...);
        return response.Value.Content;
    }
}

// Problems:
// 💀 Memory keeps growing
// 💀 Sockets never released
// 💀 Connection pool exhausted
// 💀 App crashes under load!</code></pre>
                            </div>

                            <!-- Good Code -->
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label fixed">✅ SINGLETON</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Injecting singleton client ✨
public class ChatService
{
    private readonly OpenAIClient _client;

    public ChatService(OpenAIClient client)
    {
        _client = client; // Same instance always!
    }

    public async Task&lt;string&gt; GetResponseAsync(string prompt)
    {
        var response = await _client.GetChatCompletionsAsync(...);
        return response.Value.Content;
    }
}

// Benefits:
// ✅ One client for entire app
// ✅ Connection reused
// ✅ Memory stable
// ✅ Scales beautifully!</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Full Code Section -->
                    <div class="full-code-section">
                        <div class="section-header">
                            <div class="section-icon">📦</div>
                            <div>
                                <div class="section-title">Complete Production Code</div>
                                <div class="section-subtitle">Proper Singleton with DI Container</div>
                            </div>
                        </div>

                        <!-- Step 1: DI Registration -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">1</span>
                                <span class="step-title">DI Registration — Register as Singleton</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">Program.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">var builder = WebApplication.CreateBuilder(args);

// ✅ Register OpenAI Client as Singleton
builder.Services.AddSingleton(sp =>
{
    var config = sp.GetRequiredService&lt;IConfiguration&gt;();
    var endpoint = new Uri(config["Azure:OpenAI:Endpoint"]!);
    var credential = new AzureKeyCredential(config["Azure:OpenAI:ApiKey"]!);
    
    return new OpenAIClient(endpoint, credential);
});

// ✅ HttpClient should also be Singleton (or use IHttpClientFactory)
builder.Services.AddHttpClient&lt;IExternalApiService, ExternalApiService&gt;()
    .ConfigureHttpClient(client =>
    {
        client.BaseAddress = new Uri("https://api.example.com");
        client.Timeout = TimeSpan.FromSeconds(30);
    });

// ✅ Other Singletons
builder.Services.AddSingleton&lt;ICacheService, RedisCacheService&gt;();
builder.Services.AddSingleton&lt;IMetricsService, PrometheusMetricsService&gt;();

// ⚠️ NOT Singleton - these need per-request lifetime
builder.Services.AddScoped&lt;AppDbContext&gt;();
builder.Services.AddScoped&lt;IUserService, UserService&gt;();

var app = builder.Build();</code></pre>
                            </div>
                        </div>

                        <!-- Step 2: Service Using Singleton -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">2</span>
                                <span class="step-title">Service — Inject and Use Singleton</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">ChatService.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class ChatService : IChatService
{
    private readonly OpenAIClient _openAIClient;
    private readonly ILogger&lt;ChatService&gt; _logger;

    public ChatService(OpenAIClient openAIClient, ILogger&lt;ChatService&gt; logger)
    {
        _openAIClient = openAIClient; // Same instance for all requests!
        _logger = logger;
    }

    public async Task&lt;ChatResponse&gt; GetCompletionAsync(string prompt, string model = "gpt-4")
    {
        var options = new ChatCompletionsOptions
        {
            DeploymentName = model,
            Messages = { new ChatRequestUserMessage(prompt) },
            MaxTokens = 1000,
            Temperature = 0.7f
        };

        var response = await _openAIClient.GetChatCompletionsAsync(options);
        
        _logger.LogInformation("Tokens used: {Tokens}", 
            response.Value.Usage.TotalTokens);

        return new ChatResponse
        {
            Content = response.Value.Choices[0].Message.Content,
            TokensUsed = response.Value.Usage.TotalTokens
        };
    }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 3: Thread-Safe Singleton (Manual) -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">3</span>
                                <span class="step-title">Manual Singleton — Thread-Safe Implementation</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">OpenAIClientSingleton.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Manual Singleton (when DI not available)
// ⚠️ Prefer DI Container over this!
public sealed class OpenAIClientSingleton
{
    private static readonly Lazy&lt;OpenAIClient&gt; _instance = 
        new Lazy&lt;OpenAIClient&gt;(() =>
        {
            var endpoint = Environment.GetEnvironmentVariable("AZURE_OPENAI_ENDPOINT");
            var apiKey = Environment.GetEnvironmentVariable("AZURE_OPENAI_KEY");
            
            return new OpenAIClient(
                new Uri(endpoint!),
                new AzureKeyCredential(apiKey!));
        });

    // Private constructor prevents external instantiation
    private OpenAIClientSingleton() { }

    // Thread-safe instance access
    public static OpenAIClient Instance => _instance.Value;
}

// Usage (not recommended, prefer DI):
// var client = OpenAIClientSingleton.Instance;
// var response = await client.GetChatCompletionsAsync(...);</code></pre>
                            </div>
                        </div>

                        <!-- Step 4: What NOT to make Singleton -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">4</span>
                                <span class="step-title">⚠️ What NOT to Make Singleton</span>
                            </div>
                            <div class="code-block naive">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">DontDoThis.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// ❌ NEVER make these Singleton!

// 1. DbContext - Tracks entities, NOT thread-safe!
services.AddSingleton&lt;AppDbContext&gt;(); // 💀 WRONG!
services.AddScoped&lt;AppDbContext&gt;();    // ✅ CORRECT!

// 2. User-specific data
services.AddSingleton&lt;UserSession&gt;(); // 💀 All users share same session!
services.AddScoped&lt;UserSession&gt;();    // ✅ CORRECT!

// 3. Stateful services
services.AddSingleton&lt;ShoppingCart&gt;(); // 💀 Everyone sees same cart!
services.AddScoped&lt;ShoppingCart&gt;();    // ✅ CORRECT!

// 4. Services with request-specific data
services.AddSingleton&lt;RequestContext&gt;(); // 💀 Race conditions!
services.AddScoped&lt;RequestContext&gt;();    // ✅ CORRECT!

// ✅ SAFE for Singleton:
// - HttpClient / IHttpClientFactory
// - SDK Clients (OpenAI, Azure, etc.)
// - Cache services (Redis client)
// - Configuration services
// - Logger factories</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Interview-ready points</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 When to Use Singleton?</div>
                            <p class="takeaway-text">
                                <span class="highlight">SDK Clients</span> — OpenAI, Azure, AWS clients<br>
                                <span class="highlight">HttpClient</span> — Connection pooling benefits<br>
                                <span class="highlight">Cache Services</span> — Redis, MemoryCache clients<br>
                                <span class="highlight">Configuration</span> — App settings, feature flags<br>
                                <span class="highlight">Logging</span> — Logger factories
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">IHttpClientFactory</span>
                                <span class="future-idea">Lazy&lt;T&gt; Initialization</span>
                                <span class="future-idea">Double-Check Locking</span>
                                <span class="future-idea">Service Lifetimes</span>
                            </div>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 INTERVIEW ANSWER</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">Singleton</span> = Ek class ka sirf ek instance, poori app lifetime ke liye<br>
                                <span class="emphasis">Use for</span> = Stateless, thread-safe, shared services<br>
                                <span class="emphasis">Avoid for</span> = DbContext, user data, stateful services<br><br>
                                "Memory stable, connections reused, system scalable!" 🚀
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #7: FACTORY PATTERN ==================== -->
                <article class="reel-card" id="factory-pattern" data-reel="7">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-factory" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #07</span>
                                    <span class="reel-duration">⏱️ 50 sec</span>
                                    <span class="reel-category">Design Pattern</span>
                                </div>
                                <h2 class="reel-header-title">Factory Pattern — Azure Search Client Creation</h2>
                                <p class="reel-header-subtitle">Tum bas order do, banana mera kaam hai! 🏭</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #07</span>
                            <span class="reel-duration">⏱️ 50 sec</span>
                            <span class="reel-category">Design Pattern</span>
                        </div>
                        <h2 class="reel-title">Factory Pattern — Azure Search Client Creation</h2>
                        <p class="reel-subtitle">Tum bas order do, banana mera kaam hai! 🏭</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">Production code me har jagah <code>new</code> keyword dikh raha hai? Samajh jao <strong>Factory missing hai</strong>.</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">50-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">Suppose tum ek project pe kaam kar rahe ho aur tumhe Azure Search se data fetch karna hai.</span><br>
                                    Simple lagta hai na? Tum seedha code likhte ho: <span class="highlight">new SearchClient</span>, endpoint do, index name do, api key do, kaam khatam.
                                </div>
                                
                                <div class="script-para">
                                    Ab problem yahan start hoti hai. Kal ko <span class="emphasis">Azure Search ka version change</span> ho gaya, ya credential ka type change ho gaya, ya tumhe testing ke time <span class="highlight">fake client inject</span> karna hai. Ab tumhare codebase ke <span class="emphasis">10 jagah pe new SearchClient</span> likha hua hai. Ek choti si change ke liye pura code hilega.
                                </div>

                                <div class="script-para">
                                    Toh architect kya karta hai? Wo bolta hai, bhai <span class="highlight">object banana client ka kaam nahi hai</span>. Client ka kaam hai <span class="emphasis">use karna</span>. Banana kisi aur ka kaam hona chahiye. Yahin se <span class="highlight">Factory Pattern</span> aata hai.
                                </div>

                                <div class="script-para">
                                    Ab scenario dekho. Tum .NET me <span class="emphasis">Dependency Injection</span> use kar rahe ho. Startup ya DI file me tum likhte ho: <code style="background: rgba(58, 134, 255, 0.2); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-blue);">services.AddSingleton</code> aur uske andar ek function. Wo function configuration uthata hai, endpoint read karta hai, api key banata hai aur ek <span class="highlight">fully ready SearchClient</span> return kar deta hai.
                                </div>

                                <div class="script-para">
                                    Ab jo bhi class ko SearchClient chahiye, wo sirf <span class="emphasis">constructor me maangta hai</span>. Use ye nahi pata ye kaise bana, kaha se bana, kis config se bana. <span class="highlight">Yehi Factory Pattern hai.</span>
                                </div>

                                <div class="script-para">
                                    Simple language me, <span class="highlight">Factory bolta hai: tum bas order do, banana mera kaam hai.</span>
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Interview Answer:</span><br>
                                    Factory Pattern <span class="emphasis">object creation ko centralize</span> karta hai, creation logic ko hide karta hai, aur DI containers like .NET ka built-in container actually <span class="emphasis">ek real-world factory</span> hi hote hain.
                                </div>

                                <div class="script-para" style="margin-top: 1rem; padding: 1rem; background: rgba(255, 190, 11, 0.1); border-radius: 8px; border-left: 3px solid var(--accent-yellow);">
                                    <span class="highlight">🎯 Remember:</span><br>
                                    Production code me har jagah <span class="emphasis">new keyword</span> dikh raha hai? Samajh jao <span class="emphasis">factory missing hai</span>.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">Factory Pattern — Centralized Object Creation</div>
                            </div>
                        </div>

                        <!-- Factory Concept Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">📐 Factory Pattern Concept</div>
                            <div class="mermaid">
flowchart TB
    subgraph Consumers["📦 CONSUMERS"]
        S1[SearchService]
        S2[IndexService]
        S3[QueryService]
    end
    
    subgraph Factory["🏭 FACTORY / DI CONTAINER"]
        F["services.AddSingleton\n(Factory Function)"]
        F --> C["SearchClient"]
    end
    
    subgraph Config["⚙️ CONFIGURATION"]
        E[Endpoint]
        K[API Key]
        I[Index Name]
    end
    
    Config --> F
    S1 -->|"Inject"| C
    S2 -->|"Inject"| C
    S3 -->|"Inject"| C
    
    style S1 fill:#667eea,color:#fff
    style S2 fill:#667eea,color:#fff
    style S3 fill:#667eea,color:#fff
    style F fill:#ffbe0b,color:#1a1a2e,stroke-width:3px
    style C fill:#06d6a0,color:#1a1a2e
    style E fill:#8338ec,color:#fff
    style K fill:#8338ec,color:#fff
    style I fill:#8338ec,color:#fff
                            </div>
                        </div>

                        <!-- Bad vs Good Comparison -->
                        <div class="architecture-diagram">
                            <h4>⚔️ Direct Instantiation vs Factory Pattern</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- Direct Instantiation -->
                                <div class="mermaid-container" style="border-color: rgba(239, 71, 111, 0.4);">
                                    <div class="diagram-label" style="background: rgba(239, 71, 111, 0.2); border-color: rgba(239, 71, 111, 0.4); color: #ef476f;">❌ Direct new Everywhere</div>
                                    <div class="mermaid">
flowchart TD
    A[Service A] --> N1["new SearchClient(...)"]
    B[Service B] --> N2["new SearchClient(...)"]
    C[Service C] --> N3["new SearchClient(...)"]
    
    D["💀 10 places to change!\n💀 Hardcoded config\n💀 Can't mock for tests"]
    
    style A fill:#2d1f1f,stroke:#ef476f,color:#fff
    style B fill:#2d1f1f,stroke:#ef476f,color:#fff
    style C fill:#2d1f1f,stroke:#ef476f,color:#fff
    style N1 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style N2 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style N3 fill:#2d1f1f,stroke:#ef476f,color:#fff
    style D fill:#2d1f1f,stroke:#ef476f,color:#fff
                                    </div>
                                </div>

                                <!-- Factory Pattern -->
                                <div class="mermaid-container" style="border-color: rgba(6, 214, 160, 0.4);">
                                    <div class="diagram-label" style="background: rgba(6, 214, 160, 0.2); border-color: rgba(6, 214, 160, 0.4); color: #06d6a0;">✅ Factory Pattern</div>
                                    <div class="mermaid">
flowchart TD
    F["🏭 Factory"] --> SC["SearchClient"]
    A[Service A] -->|inject| SC
    B[Service B] -->|inject| SC
    C[Service C] -->|inject| SC
    
    D["✅ One place to change!\n✅ Config centralized\n✅ Easy to mock!"]
    
    style F fill:#ffbe0b,color:#1a1a2e,stroke-width:3px
    style SC fill:#06d6a0,color:#1a1a2e
    style A fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style B fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style C fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style D fill:#1f2d1f,stroke:#06d6a0,color:#fff
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Factory Types Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🏭 Types of Factories in .NET</div>
                            <div class="mermaid">
flowchart LR
    subgraph Simple["📦 SIMPLE FACTORY"]
        S1["DI Registration"]
        S2["services.AddSingleton()"]
    end
    
    subgraph Method["🔧 FACTORY METHOD"]
        M1["Interface-based"]
        M2["ISearchClientFactory"]
    end
    
    subgraph Abstract["🏗️ ABSTRACT FACTORY"]
        A1["Family of objects"]
        A2["IAzureServiceFactory"]
    end
    
    style S1 fill:#06d6a0,color:#1a1a2e
    style S2 fill:#06d6a0,color:#1a1a2e
    style M1 fill:#667eea,color:#fff
    style M2 fill:#667eea,color:#fff
    style A1 fill:#ff006e,color:#fff
    style A2 fill:#ff006e,color:#fff
                            </div>
                        </div>
                    </div>

                    <!-- Code Section - Comparison -->
                    <div class="code-section">
                        <div class="section-header">
                            <div class="section-icon">💻</div>
                            <div>
                                <div class="section-title">Code Comparison — Direct new vs Factory</div>
                                <div class="section-subtitle">Show both in reel for impact</div>
                            </div>
                        </div>

                        <div class="code-comparison">
                            <!-- Bad Code -->
                            <div class="code-block naive">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label naive">❌ DIRECT NEW</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Creating client directly in service 💀
public class SearchService
{
    public async Task&lt;List&lt;Result&gt;&gt; SearchAsync(string query)
    {
        // 💀 Hardcoded everywhere!
        var client = new SearchClient(
            new Uri("https://mysearch.search.windows.net"),
            "my-index",
            new AzureKeyCredential("my-api-key"));
        
        var results = await client.SearchAsync&lt;Product&gt;(query);
        return results.Value.GetResults().ToList();
    }
}

// Problems:
// 💀 Config hardcoded in 10 places
// 💀 Can't change endpoint without code change
// 💀 Can't mock for unit tests
// 💀 Credential management nightmare</code></pre>
                            </div>

                            <!-- Good Code -->
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">C#</span>
                                        <span class="code-label fixed">✅ FACTORY</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Client injected via DI ✨
public class SearchService
{
    private readonly SearchClient _client;

    public SearchService(SearchClient client)
    {
        _client = client; // Factory created this!
    }

    public async Task&lt;List&lt;Result&gt;&gt; SearchAsync(string query)
    {
        var results = await _client.SearchAsync&lt;Product&gt;(query);
        return results.Value.GetResults().ToList();
    }
}

// Benefits:
// ✅ Config in one place
// ✅ Easy to change endpoint
// ✅ Easy to mock for tests
// ✅ Clean, focused service</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Full Code Section -->
                    <div class="full-code-section">
                        <div class="section-header">
                            <div class="section-icon">📦</div>
                            <div>
                                <div class="section-title">Complete Production Code</div>
                                <div class="section-subtitle">Factory Pattern with DI Container</div>
                            </div>
                        </div>

                        <!-- Step 1: DI Registration (Factory) -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">1</span>
                                <span class="step-title">Factory Registration — The Magic Happens Here</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">Program.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">var builder = WebApplication.CreateBuilder(args);

// 🏭 Factory Function for SearchClient
builder.Services.AddSingleton(sp =>
{
    var config = sp.GetRequiredService&lt;IConfiguration&gt;();
    
    // Read config from appsettings.json
    var endpoint = config["AzureSearch:Endpoint"]!;
    var indexName = config["AzureSearch:IndexName"]!;
    var apiKey = config["AzureSearch:ApiKey"]!;
    
    // Create and return fully configured client
    return new SearchClient(
        new Uri(endpoint),
        indexName,
        new AzureKeyCredential(apiKey));
});

// 🏭 Factory for OpenAI Client
builder.Services.AddSingleton(sp =>
{
    var config = sp.GetRequiredService&lt;IConfiguration&gt;();
    return new OpenAIClient(
        new Uri(config["Azure:OpenAI:Endpoint"]!),
        new AzureKeyCredential(config["Azure:OpenAI:ApiKey"]!));
});

// 🏭 Factory for Blob Service Client
builder.Services.AddSingleton(sp =>
{
    var config = sp.GetRequiredService&lt;IConfiguration&gt;();
    return new BlobServiceClient(config["Azure:Storage:ConnectionString"]!);
});

// Services that USE these clients
builder.Services.AddScoped&lt;ISearchService, SearchService&gt;();
builder.Services.AddScoped&lt;IChatService, ChatService&gt;();</code></pre>
                            </div>
                        </div>

                        <!-- Step 2: Custom Factory Interface -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">2</span>
                                <span class="step-title">Custom Factory Interface — For Multiple Instances</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">ISearchClientFactory.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// When you need to create multiple clients dynamically
public interface ISearchClientFactory
{
    SearchClient CreateClient(string indexName);
}

public class SearchClientFactory : ISearchClientFactory
{
    private readonly IConfiguration _config;
    private readonly ConcurrentDictionary&lt;string, SearchClient&gt; _clients = new();

    public SearchClientFactory(IConfiguration config)
    {
        _config = config;
    }

    public SearchClient CreateClient(string indexName)
    {
        // Cache clients per index (Flyweight + Factory!)
        return _clients.GetOrAdd(indexName, name =>
        {
            var endpoint = _config["AzureSearch:Endpoint"]!;
            var apiKey = _config["AzureSearch:ApiKey"]!;
            
            return new SearchClient(
                new Uri(endpoint),
                name,
                new AzureKeyCredential(apiKey));
        });
    }
}

// Registration
builder.Services.AddSingleton&lt;ISearchClientFactory, SearchClientFactory&gt;();</code></pre>
                            </div>
                        </div>

                        <!-- Step 3: Using Factory -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">3</span>
                                <span class="step-title">Service Using Factory — Clean & Testable</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">SearchService.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">public class SearchService : ISearchService
{
    private readonly SearchClient _client;
    private readonly ILogger&lt;SearchService&gt; _logger;

    // Client is injected - we don't care HOW it was created!
    public SearchService(SearchClient client, ILogger&lt;SearchService&gt; logger)
    {
        _client = client;
        _logger = logger;
    }

    public async Task&lt;SearchResult&lt;T&gt;&gt; SearchAsync&lt;T&gt;(string query, SearchOptions? options = null)
    {
        _logger.LogInformation("Searching for: {Query}", query);
        
        var response = await _client.SearchAsync&lt;T&gt;(query, options);
        
        _logger.LogInformation("Found {Count} results", response.Value.TotalCount);
        
        return new SearchResult&lt;T&gt;
        {
            Results = response.Value.GetResults().Select(r => r.Document).ToList(),
            TotalCount = response.Value.TotalCount ?? 0
        };
    }
}

// In tests - easy to mock!
[Fact]
public async Task Search_ReturnsResults()
{
    var mockClient = new Mock&lt;SearchClient&gt;(); // Easy!
    var service = new SearchService(mockClient.Object, _logger);
    // ... test logic
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 4: Abstract Factory -->
                        <div class="code-step">
                            <div class="code-step-header">
                                <span class="step-number">4</span>
                                <span class="step-title">Abstract Factory — Family of Related Objects</span>
                            </div>
                            <div class="code-block fixed">
                                <div class="code-header">
                                    <div class="code-header-left">
                                        <div class="code-dots">
                                            <span class="code-dot red"></span>
                                            <span class="code-dot yellow"></span>
                                            <span class="code-dot green"></span>
                                        </div>
                                        <span class="code-lang">IAzureClientFactory.cs</span>
                                    </div>
                                    <button class="copy-btn" onclick="copyCode(this)">📋 Copy</button>
                                </div>
                                <pre><code class="language-csharp">// Abstract Factory - creates family of related Azure clients
public interface IAzureClientFactory
{
    SearchClient CreateSearchClient();
    OpenAIClient CreateOpenAIClient();
    BlobServiceClient CreateBlobClient();
}

public class AzureClientFactory : IAzureClientFactory
{
    private readonly IConfiguration _config;

    public AzureClientFactory(IConfiguration config) => _config = config;

    public SearchClient CreateSearchClient()
    {
        return new SearchClient(
            new Uri(_config["Azure:Search:Endpoint"]!),
            _config["Azure:Search:Index"]!,
            new AzureKeyCredential(_config["Azure:Search:Key"]!));
    }

    public OpenAIClient CreateOpenAIClient()
    {
        return new OpenAIClient(
            new Uri(_config["Azure:OpenAI:Endpoint"]!),
            new AzureKeyCredential(_config["Azure:OpenAI:Key"]!));
    }

    public BlobServiceClient CreateBlobClient()
    {
        return new BlobServiceClient(_config["Azure:Storage:ConnectionString"]!);
    }
}

// Usage
public class RAGService
{
    public RAGService(IAzureClientFactory factory)
    {
        _searchClient = factory.CreateSearchClient();
        _openAIClient = factory.CreateOpenAIClient();
    }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Interview-ready points</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 Factory Pattern Benefits</div>
                            <p class="takeaway-text">
                                <span class="highlight">Centralized Creation</span> — One place to create objects<br>
                                <span class="highlight">Hidden Complexity</span> — Consumer doesn't know creation details<br>
                                <span class="highlight">Easy Testing</span> — Mock the factory or inject fake objects<br>
                                <span class="highlight">Config Flexibility</span> — Change config without touching services<br>
                                <span class="highlight">Consistent Objects</span> — All instances created the same way
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">Simple Factory</span>
                                <span class="future-idea">Factory Method</span>
                                <span class="future-idea">Abstract Factory</span>
                                <span class="future-idea">IHttpClientFactory</span>
                            </div>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 INTERVIEW ANSWER</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">Factory Pattern</span> = Object creation ko centralize karta hai<br>
                                <span class="emphasis">DI Container</span> = .NET ka built-in factory hai<br>
                                <span class="emphasis">Rule</span> = Har jagah <code>new</code> dikh raha hai? Factory missing hai!<br><br>
                                "Tum bas order do, banana mera kaam hai!" 🏭
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== SYSTEM DESIGN FUNDAMENTALS SECTION ==================== -->
                
                <!-- ==================== REEL #8: SYSTEM DESIGN INTRODUCTION ==================== -->
                <article class="reel-card" id="system-design-intro" data-reel="8">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-sd-intro" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #08</span>
                                    <span class="reel-duration">⏱️ 45 sec</span>
                                    <span class="reel-category">System Design</span>
                                </div>
                                <h2 class="reel-header-title">System Design Kya Hai? — Complete Intro</h2>
                                <p class="reel-header-subtitle">Customer need se working system tak ka journey! 🚀</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #08</span>
                            <span class="reel-duration">⏱️ 45 sec</span>
                            <span class="reel-category">System Design</span>
                        </div>
                        <h2 class="reel-title">System Design Kya Hai? — Complete Intro</h2>
                        <p class="reel-subtitle">Customer need se working system tak ka journey! 🚀</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">System Design sunke lagta hai bohot mushkil cheez hai? <strong>Galat!</strong> Aaj main tumhe 45 seconds mein samjhata hoon.</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">45-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">System Design sunke lagta hai bohot mushkil cheez hai?</span><br>
                                    Honestly bolu toh <span class="highlight">difficult hona zaroori nahi hai</span>! Bas samajhna padta hai ki ye actually hai kya.
                                </div>
                                
                                <div class="script-para">
                                    Dekho, har software ka <span class="emphasis">journey same hota hai</span>. Customer aata hai aur bolta hai — <span class="highlight">"Mujhe live classes chahiye"</span>, <span class="highlight">"Real-time notifications chahiye"</span>, <span class="highlight">"Payment system chahiye"</span>.
                                </div>

                                <div class="script-para">
                                    Phir <span class="highlight">Product aur Business team</span> us need ko <span class="emphasis">requirement mein convert</span> karti hai. Aur phir aata hai <span class="highlight">TUMHARA kaam</span> — as an engineer.
                                </div>

                                <div class="script-para">
                                    Tumhara job hai us requirement ko ek <span class="emphasis">WORKING SYSTEM</span> mein convert karna — jo <span class="highlight">reliable ho</span>, <span class="highlight">scalable ho</span>, aur <span class="highlight">time pe ship ho</span>!
                                </div>

                                <div class="script-para">
                                    Toh basically <span class="highlight">System Design</span> = Customer need ko product requirement mein translate karke ek <span class="emphasis">reliable, scalable, aur maintainable system</span> banana.
                                </div>

                                <div class="script-para">
                                    Ye sirf coding nahi hai — ye <span class="highlight">architecture, decisions, aur trade-offs</span> hai!
                                </div>

                                <div class="script-para" style="margin-top: 1rem; padding: 1rem; background: rgba(0, 245, 212, 0.1); border-radius: 8px; border-left: 3px solid var(--accent-cyan);">
                                    <span class="highlight">🎯 Remember:</span><br>
                                    Interview mein sirf final diagram nahi, balki <span class="emphasis">"humne ye choice KYUN ki"</span> — yahi understanding tumhe strong banati hai!
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">Customer Need to Working System Journey</div>
                            </div>
                        </div>

                        <!-- Journey Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🛤️ Need se System Tak Ka Journey</div>
                            <div class="mermaid">
flowchart TD
    subgraph Customer["👤 CUSTOMER"]
        C1["Mujhe live classes chahiye"]
        C2["Real-time interaction chahiye"]
        C3["Payment system chahiye"]
    end
    
    subgraph Business["📋 PRODUCT & BUSINESS"]
        B1["Need → Business Requirement"]
        B2["PM & Business team<br/>requirement define karti hai"]
    end
    
    subgraph Engineer["👨‍💻 ENGINEER - YOU!"]
        E1["Requirement → Working System"]
        E2["Reliable ✓"]
        E3["Scalable ✓"]
        E4["Ship on Time ✓"]
    end
    
    Customer --> Business
    Business --> Engineer
    
    style C1 fill:#ff006e,color:#fff
    style C2 fill:#ff006e,color:#fff
    style C3 fill:#ff006e,color:#fff
    style B1 fill:#8338ec,color:#fff
    style B2 fill:#8338ec,color:#fff
    style E1 fill:#06d6a0,color:#fff
    style E2 fill:#06d6a0,color:#fff
    style E3 fill:#06d6a0,color:#fff
    style E4 fill:#06d6a0,color:#fff
                            </div>
                        </div>

                        <!-- System Design Components -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🧩 System Design = Architecture + Decisions + Trade-offs</div>
                            <div class="mermaid">
flowchart LR
    subgraph Input["📥 INPUT"]
        R["Customer\nRequirement"]
    end
    
    subgraph Process["⚙️ SYSTEM DESIGN PROCESS"]
        A["🏗️ Architecture"]
        D["🤔 Decisions"]
        T["⚖️ Trade-offs"]
    end
    
    subgraph Output["📤 OUTPUT"]
        S["Working\nSystem"]
    end
    
    R --> A
    A --> D
    D --> T
    T --> S
    
    style R fill:#ff006e,color:#fff
    style A fill:#3a86ff,color:#fff
    style D fill:#8338ec,color:#fff
    style T fill:#ffbe0b,color:#fff
    style S fill:#06d6a0,color:#fff
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Interview-ready points</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 System Design in One Line</div>
                            <p class="takeaway-text">
                                <span class="highlight">Definition</span> — Customer need ko working system mein convert karna<br>
                                <span class="highlight">Focus</span> — Reliable, Scalable, Maintainable<br>
                                <span class="highlight">Key Skill</span> — Reasoning ability (WHY behind decisions)
                            </p>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 INTERVIEW ANSWER</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">System Design</span> = Customer need → Business requirement → Working system<br>
                                <span class="emphasis">Not just coding</span> — Architecture, decisions, trade-offs<br>
                                <span class="emphasis">Goal</span> = Reliable + Scalable + Ship on time! 🚀
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #9: SYSTEM TYPES & DESIGN LAYERS ==================== -->
                <article class="reel-card" id="system-types-layers" data-reel="9">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-sd-types" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #09</span>
                                    <span class="reel-duration">⏱️ 50 sec</span>
                                    <span class="reel-category">System Design</span>
                                </div>
                                <h2 class="reel-header-title">System Types & 3 Design Layers</h2>
                                <p class="reel-header-subtitle">"System" ka matlab sirf website nahi hota! 🎭</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #09</span>
                            <span class="reel-duration">⏱️ 50 sec</span>
                            <span class="reel-category">System Design</span>
                        </div>
                        <h2 class="reel-title">System Types & 3 Design Layers</h2>
                        <p class="reel-subtitle">"System" ka matlab sirf website nahi hota! 🎭</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">Jab koi bole "design a system" — toh pehle ye clarify karo ki <strong>system ka scope kya hai</strong>!</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">50-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">Jab interview mein ya job mein koi bole "design a system" — toh kya samjhoge?</span><br>
                                    Bhai, <span class="highlight">"System" ek generic word hai</span>. System ka matlab sirf ek website ya app <span class="emphasis">NAHI</span> hota!
                                </div>
                                
                                <div class="script-para">
                                    System ho sakta hai — <span class="highlight">End-to-End Application</span> jaise Swiggy, Instagram. Ya phir ek <span class="highlight">Microservice</span> jaise Payment Service. Ya fir <span class="highlight">Internal Tool</span> jaise CI/CD Pipeline. Ya even <span class="highlight">Library/SDK</span> jaise React!
                                </div>

                                <div class="script-para">
                                    <span class="emphasis">Pehle scope samjho, phir design karo!</span>
                                </div>

                                <div class="script-para">
                                    Ab jab design karte ho, output <span class="highlight">3 layers</span> mein aa sakta hai:
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Layer 1: High-Level Architecture</span> — Bird's eye view. Kaunse components, services, databases honge.<br><br>
                                    <span class="highlight">Layer 2: Logical Design</span> — HOW exactly kaam karega. Business logic, algorithms, caching strategies.<br><br>
                                    <span class="highlight">Layer 3: Physical Design</span> — Infrastructure level. Instance types, capacity, regions.
                                </div>

                                <div class="script-para" style="margin-top: 1rem; padding: 1rem; background: rgba(255, 190, 11, 0.1); border-radius: 8px; border-left: 3px solid var(--accent-yellow);">
                                    <span class="highlight">⚠️ Interview Tip:</span><br>
                                    Sab kuch cover karne ki koshish mat karo! Ek <span class="emphasis">strong direction</span> pick karo aur usko <span class="emphasis">SOLID DEPTH</span> mein solve karo.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">System Types & Design Layers</div>
                            </div>
                        </div>

                        <!-- System Types Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🎭 System Ke Different Types</div>
                            <div class="mermaid">
flowchart TB
    subgraph Types["SYSTEM KA MATLAB — MULTIPLE FORMS"]
        A["🌐 End-to-End App\nSwiggy, Instagram, Netflix"]
        B["⚙️ Microservice\nPayment Service, Notification Service"]
        C["🔧 Internal Tool\nCI/CD Pipeline, Monitoring System"]
        D["📚 Library/SDK\nReact, Express.js, AWS SDK"]
        E["🔌 Hardware/Embedded\nIoT devices, Smart Home"]
    end
    
    style A fill:#ff006e,color:#fff
    style B fill:#8338ec,color:#fff
    style C fill:#3a86ff,color:#fff
    style D fill:#06d6a0,color:#fff
    style E fill:#ffbe0b,color:#fff
                            </div>
                        </div>

                        <!-- 3 Layers Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🏗️ 3 Design Output Layers</div>
                            <div class="mermaid">
flowchart TD
    subgraph L1["🦅 LAYER 1: HIGH-LEVEL ARCHITECTURE"]
        H1["Bird's Eye View"]
        H2["Components & Services"]
        H3["Databases & APIs"]
    end
    
    subgraph L2["🧠 LAYER 2: LOGICAL DESIGN"]
        M1["HOW Exactly"]
        M2["Business Logic & Algorithms"]
        M3["Caching, Retry, Auth"]
    end
    
    subgraph L3["🖥️ LAYER 3: PHYSICAL DESIGN"]
        P1["Infrastructure Level"]
        P2["Instance Types, Capacity"]
        P3["Regions & Zones"]
    end
    
    L1 --> L2
    L2 --> L3
    
    style H1 fill:#ff006e,color:#fff
    style H2 fill:#ff006e,color:#fff
    style H3 fill:#ff006e,color:#fff
    style M1 fill:#8338ec,color:#fff
    style M2 fill:#8338ec,color:#fff
    style M3 fill:#8338ec,color:#fff
    style P1 fill:#06d6a0,color:#fff
    style P2 fill:#06d6a0,color:#fff
    style P3 fill:#06d6a0,color:#fff
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Interview-ready points</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 Remember These</div>
                            <p class="takeaway-text">
                                <span class="highlight">System Types</span> — App, Microservice, Tool, SDK, Embedded<br>
                                <span class="highlight">Layer 1</span> — High-Level (What components)<br>
                                <span class="highlight">Layer 2</span> — Logical (How it works)<br>
                                <span class="highlight">Layer 3</span> — Physical (Where it runs)
                            </p>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 INTERVIEW ANSWER</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">First clarify</span> — System ka type kya hai?<br>
                                <span class="emphasis">Then design</span> — High-Level → Logical → Physical<br>
                                <span class="emphasis">Pro tip</span> — Depth over breadth. Sab cover mat karo! 🎯
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #10: SPIRAL APPROACH ==================== -->
                <article class="reel-card" id="spiral-approach" data-reel="10">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-sd-spiral" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #10</span>
                                    <span class="reel-duration">⏱️ 50 sec</span>
                                    <span class="reel-category">System Design</span>
                                </div>
                                <h2 class="reel-header-title">Spiral Approach — Core se Outward</h2>
                                <p class="reel-header-subtitle">Confident ho? Seedha core pe land karo! 🌀</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #10</span>
                            <span class="reel-duration">⏱️ 50 sec</span>
                            <span class="reel-category">System Design</span>
                        </div>
                        <h2 class="reel-title">Spiral Approach — Core se Outward</h2>
                        <p class="reel-subtitle">Confident ho? Seedha core pe land karo! 🌀</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">System design ke do powerful approaches hain. Pehla hai <strong>Spiral Approach</strong> — jab tum <strong>confident</strong> ho!</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">50-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">System design kaise approach karte ho?</span><br>
                                    Jab tum <span class="highlight">confident ho</span> ki solution kya hoga — tab <span class="emphasis">Spiral Approach</span> use karo!
                                </div>
                                
                                <div class="script-para">
                                    Isme tum pehle system ka <span class="highlight">CORE</span> decide karte ho, aur phir us core ke around system ko <span class="emphasis">layer by layer</span> build karte ho. Spiral ki tarah outward grow karta hai!
                                </div>

                                <div class="script-para">
                                    Example dekho: <span class="highlight">E-commerce system</span> bana rahe ho.<br><br>
                                    <span class="emphasis">Step 1:</span> Core Database — OrderDB<br>
                                    <span class="emphasis">Step 2:</span> Basic Service — Order Service<br>
                                    <span class="emphasis">Step 3:</span> Payment module add karo<br>
                                    <span class="emphasis">Step 4:</span> Failure handling — Retry, Dead Letter Queue<br>
                                    <span class="emphasis">Step 5:</span> Auditing — Logging, Event stream
                                </div>

                                <div class="script-para">
                                    Har step pe ek <span class="highlight">new layer</span> add hoti hai, system <span class="emphasis">grow karta</span> rehta hai!
                                </div>

                                <div class="script-para" style="margin-top: 1rem; padding: 1rem; background: rgba(0, 245, 212, 0.1); border-radius: 8px; border-left: 3px solid var(--accent-cyan);">
                                    <span class="highlight">✅ Spiral Best Hai Jab:</span><br>
                                    • Solution <span class="emphasis">well understood</span> hai<br>
                                    • Tum domain mein <span class="emphasis">experienced</span> ho<br>
                                    • Pattern <span class="emphasis">production-tested</span> hai<br>
                                    • <span class="emphasis">Fast delivery</span> chahiye
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">Spiral Approach — Layer by Layer Growth</div>
                            </div>
                        </div>

                        <!-- Spiral Growth Diagram -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🌀 Spiral Approach — Core se Outward</div>
                            <div class="mermaid">
flowchart TD
    subgraph Core["🎯 CORE"]
        DB["🗄️ Database"]
    end
    
    subgraph L1["Layer 1"]
        API["🌐 API Service"]
    end
    
    subgraph L2["Layer 2"]
        AUTH["🔐 Auth Layer"]
    end
    
    subgraph L3["Layer 3"]
        MON["📊 Monitoring"]
    end
    
    subgraph L4["Layer 4"]
        CACHE["🔄 Caching"]
    end
    
    subgraph L5["Layer 5"]
        BG["⚡ Background Jobs"]
    end
    
    DB --> API
    API --> AUTH
    AUTH --> MON
    MON --> CACHE
    CACHE --> BG
    
    style DB fill:#ff006e,color:#fff,stroke-width:3px
    style API fill:#8338ec,color:#fff
    style AUTH fill:#3a86ff,color:#fff
    style MON fill:#06d6a0,color:#fff
    style CACHE fill:#ffbe0b,color:#fff
    style BG fill:#00f5d4,color:#fff
                            </div>
                        </div>

                        <!-- E-commerce Example -->
                        <div class="mermaid-container">
                            <div class="diagram-label">📱 E-commerce System Spiral Example</div>
                            <div class="mermaid">
flowchart LR
    subgraph S1["Step 1"]
        D1["OrderDB"]
    end
    
    subgraph S2["Step 2"]
        D2["OrderDB"]
        O2["Order Service"]
        D2 --- O2
    end
    
    subgraph S3["Step 3"]
        D3["OrderDB"]
        O3["Order Service"]
        P3["Payment Service"]
        D3 --- O3
        O3 --- P3
    end
    
    subgraph S4["Step 4"]
        D4["OrderDB"]
        O4["Order + Payment"]
        R4["Retry + DLQ"]
        D4 --- O4
        O4 --- R4
    end
    
    S1 -->|"Add Service"| S2
    S2 -->|"Add Payment"| S3
    S3 -->|"Handle Failures"| S4
    
    style D1 fill:#ff006e,color:#fff
    style D2 fill:#ff006e,color:#fff
    style O2 fill:#8338ec,color:#fff
    style D3 fill:#ff006e,color:#fff
    style O3 fill:#8338ec,color:#fff
    style P3 fill:#06d6a0,color:#fff
    style D4 fill:#ff006e,color:#fff
    style O4 fill:#8338ec,color:#fff
    style R4 fill:#ffbe0b,color:#fff
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Interview-ready points</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 Spiral Approach Summary</div>
                            <p class="takeaway-text">
                                <span class="highlight">Core First</span> — Database, main service<br>
                                <span class="highlight">Layer by Layer</span> — Auth, Monitoring, Caching<br>
                                <span class="highlight">When to Use</span> — Confident, experienced, known patterns
                            </p>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 INTERVIEW ANSWER</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">Spiral Approach</span> = Core decide karo, layer by layer build karo<br>
                                <span class="emphasis">Use when</span> = Solution well understood, pattern tested<br>
                                <span class="emphasis">Benefit</span> = Fast delivery, directly land on right core! 🌀
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #11: MVP APPROACH ==================== -->
                <article class="reel-card" id="mvp-approach" data-reel="11">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-sd-mvp" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #11</span>
                                    <span class="reel-duration">⏱️ 55 sec</span>
                                    <span class="reel-category">System Design</span>
                                </div>
                                <h2 class="reel-header-title">Incremental MVP — Ship First, Scale Later</h2>
                                <p class="reel-header-subtitle">Uncertain ho? Simple start karo, evolve karo! 📈</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #11</span>
                            <span class="reel-duration">⏱️ 55 sec</span>
                            <span class="reel-category">System Design</span>
                        </div>
                        <h2 class="reel-title">Incremental MVP — Ship First, Scale Later</h2>
                        <p class="reel-subtitle">Uncertain ho? Simple start karo, evolve karo! 📈</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">Agar tum <strong>sure nahi ho</strong> ki exact solution kya hoga — toh <strong>MVP Approach</strong> use karo!</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">55-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">Agar tum sure nahi ho ki exact solution kya hoga — kya karoge?</span><br>
                                    Tab <span class="highlight">Incremental MVP</span> approach use karo! MVP matlab <span class="emphasis">Minimum Viable Product</span>.
                                </div>
                                
                                <div class="script-para">
                                    <span class="highlight">Day-0</span> pe bilkul simple start karo — bas ek <span class="emphasis">API Server + Database</span>. Bas! Working solution ship karo first!
                                </div>

                                <div class="script-para">
                                    Ab <span class="highlight">Problem 1</span> aaya: Traffic badh gaya, ek server handle nahi kar pa raha!<br>
                                    <span class="emphasis">Solution:</span> Load Balancer + Multiple Servers add karo.
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Problem 2</span> aaya: Database choke ho raha, queries timeout!<br>
                                    <span class="emphasis">Solution:</span> Read Replicas + Redis Cache add karo.
                                </div>

                                <div class="script-para">
                                    <span class="highlight">Problem 3</span> aaya: Heavy tasks requests slow kar rahe!<br>
                                    <span class="emphasis">Solution:</span> Message Broker (Kafka/SQS) + Background Workers add karo.
                                </div>

                                <div class="script-para">
                                    Dekha? <span class="highlight">Problem aaya</span>, tab solution add kiya. <span class="emphasis">Real signals</span> ke basis pe evolve kiya!
                                </div>

                                <div class="script-para" style="margin-top: 1rem; padding: 1rem; background: rgba(255, 157, 67, 0.1); border-radius: 8px; border-left: 3px solid var(--accent-orange);">
                                    <span class="highlight">✅ MVP Best Hai Jab:</span><br>
                                    • Requirements <span class="emphasis">vague</span> hain<br>
                                    • Scaling journey <span class="emphasis">unknown</span> hai<br>
                                    • <span class="emphasis">Over-engineering</span> avoid karna hai<br>
                                    • <span class="emphasis">Real signals</span> ke basis pe evolve karna hai
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">MVP Evolution — Problem → Solution</div>
                            </div>
                        </div>

                        <!-- Day 0 to Scale -->
                        <div class="mermaid-container">
                            <div class="diagram-label">📈 MVP Evolution Journey</div>
                            <div class="mermaid">
flowchart TD
    subgraph D0["DAY 0: Simple Start"]
        A0["API Server"] --> DB0["Database"]
    end
    
    subgraph S1["SCALE 1: Traffic ↑"]
        LB1["Load Balancer"]
        LB1 --> S1A["Server 1"]
        LB1 --> S1B["Server 2"]
        LB1 --> S1C["Server 3"]
        S1A --> DB1["Database"]
        S1B --> DB1
        S1C --> DB1
    end
    
    subgraph S2["SCALE 2: DB Choke"]
        S2S["Servers"]
        S2S --> CACHE["Redis Cache"]
        S2S --> PRI["Primary DB"]
        PRI --> REP1["Replica 1"]
        PRI --> REP2["Replica 2"]
    end
    
    D0 -->|"Traffic problem"| S1
    S1 -->|"DB problem"| S2
    
    style A0 fill:#06d6a0,color:#fff
    style DB0 fill:#3a86ff,color:#fff
    style LB1 fill:#ff006e,color:#fff
    style CACHE fill:#ffbe0b,color:#fff
    style PRI fill:#8338ec,color:#fff
                            </div>
                        </div>

                        <!-- Spiral vs MVP Decision -->
                        <div class="architecture-diagram">
                            <h4>⚔️ Spiral vs MVP — Quick Decision Guide</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- Spiral -->
                                <div class="mermaid-container" style="border-color: rgba(6, 214, 160, 0.4);">
                                    <div class="diagram-label" style="background: rgba(6, 214, 160, 0.2); border-color: rgba(6, 214, 160, 0.4); color: #06d6a0;">🌀 Spiral — CONFIDENT</div>
                                    <div class="mermaid">
flowchart TD
    A["✅ Solution understood"]
    B["✅ Domain experienced"]
    C["✅ Pattern tested"]
    D["✅ Fast delivery needed"]
    
    style A fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style B fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style C fill:#1f2d1f,stroke:#06d6a0,color:#fff
    style D fill:#1f2d1f,stroke:#06d6a0,color:#fff
                                    </div>
                                </div>

                                <!-- MVP -->
                                <div class="mermaid-container" style="border-color: rgba(255, 157, 67, 0.4);">
                                    <div class="diagram-label" style="background: rgba(255, 157, 67, 0.2); border-color: rgba(255, 157, 67, 0.4); color: #ff9f43;">📈 MVP — UNCERTAIN</div>
                                    <div class="mermaid">
flowchart TD
    A["✅ Requirements vague"]
    B["✅ Scaling unknown"]
    C["✅ Avoid over-engineering"]
    D["✅ Evolve with real data"]
    
    style A fill:#2d2a1f,stroke:#ff9f43,color:#fff
    style B fill:#2d2a1f,stroke:#ff9f43,color:#fff
    style C fill:#2d2a1f,stroke:#ff9f43,color:#fff
    style D fill:#2d2a1f,stroke:#ff9f43,color:#fff
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Interview-ready points</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 MVP Approach Summary</div>
                            <p class="takeaway-text">
                                <span class="highlight">Day 0</span> — Simple start, ship fast<br>
                                <span class="highlight">Problem → Solution</span> — Evolve as needed<br>
                                <span class="highlight">When to Use</span> — Uncertain, vague requirements
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">Load Balancer</span>
                                <span class="future-idea">Read Replicas</span>
                                <span class="future-idea">Redis Cache</span>
                                <span class="future-idea">Message Broker</span>
                            </div>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 INTERVIEW ANSWER</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">MVP Approach</span> = Simple start, evolve with scale<br>
                                <span class="emphasis">Rule</span> = Confident? Spiral. Uncertain? MVP.<br>
                                <span class="emphasis">Benefit</span> = No over-engineering, real data driven! 📈
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- ==================== REEL #12: 3 GOLDEN RULES ==================== -->
                <article class="reel-card" id="golden-rules" data-reel="12">
                    <!-- Collapsible Header -->
                    <div class="reel-card-header" onclick="toggleReel(this)">
                        <div class="reel-header-left">
                            <div class="reel-checkbox-wrapper" onclick="event.stopPropagation()">
                                <input type="checkbox" class="reel-checkbox" id="check-sd-rules" onchange="toggleComplete(this)">
                            </div>
                            <div class="reel-header-info">
                                <div class="reel-header-top">
                                    <span class="reel-number">Reel #12</span>
                                    <span class="reel-duration">⏱️ 60 sec</span>
                                    <span class="reel-category">System Design</span>
                                </div>
                                <h2 class="reel-header-title">3 Golden Rules + Divide & Conquer</h2>
                                <p class="reel-header-subtitle">Ye rules hamesha yaad rakho! 🏆</p>
                            </div>
                        </div>
                        <div class="reel-expand-icon">▼</div>
                    </div>
                    
                    <!-- Collapsible Content -->
                    <div class="reel-card-content">
                    <!-- Reel Header -->
                    <div class="reel-header">
                        <div class="reel-meta">
                            <span class="reel-number">Reel #12</span>
                            <span class="reel-duration">⏱️ 60 sec</span>
                            <span class="reel-category">System Design</span>
                        </div>
                        <h2 class="reel-title">3 Golden Rules + Divide & Conquer</h2>
                        <p class="reel-subtitle">Ye rules hamesha yaad rakho! 🏆</p>
                    </div>

                    <!-- Hook Section -->
                    <div class="hook-section">
                        <div class="hook-label">🎣 HOOK — Record This First!</div>
                        <p class="hook-text">System design ke <strong>3 Golden Rules</strong> jo har interview aur job mein kaam aayenge!</p>
                    </div>

                    <!-- Script Section -->
                    <div class="script-section">
                        <div class="section-header">
                            <div class="section-icon">📝</div>
                            <div>
                                <div class="section-title">60-Sec Hinglish Script</div>
                                <div class="section-subtitle">Natural flow, English letters</div>
                            </div>
                        </div>

                        <div class="script-content">
                            <div class="script-text">
                                <div class="script-para">
                                    <span class="question">System design ke 3 Golden Rules jo har interview aur job mein kaam aayenge!</span>
                                </div>
                                
                                <div class="script-para">
                                    <span class="highlight">🥇 Rule 1: SCOPE FENCE KARO</span><br>
                                    Har system infinitely buildable hota hai. Par time limited hai! Interview mein 45-60 min hai. Toh clearly bolo — <span class="emphasis">"Ye IN SCOPE hai, ye OUT OF SCOPE hai"</span>. Ye <span class="highlight">maturity</span> ka sign hai!
                                </div>

                                <div class="script-para">
                                    <span class="highlight">🥈 Rule 2: CLARIFICATIONS LO</span><br>
                                    Problem statements ambiguous hote hain! Puchho — <span class="emphasis">"Traffic kitna hai?"</span>, <span class="emphasis">"Latency requirement kya hai?"</span>, <span class="emphasis">"Strong consistency chahiye ya eventual?"</span>. Ye questions <span class="highlight">RIGHT design decisions</span> tak le jaate hain!
                                </div>

                                <div class="script-para">
                                    <span class="highlight">🥉 Rule 3: CRITICAL QUESTIONS PUCHO</span><br>
                                    Blindly follow mat karo! Puchho — <span class="emphasis">"HTTP use karein ya gRPC better hoga?"</span>, <span class="emphasis">"WebSockets chahiye ya polling enough hai?"</span>. Ek critical question <span class="highlight">POORI ARCHITECTURE</span> change kar sakta hai!
                                </div>

                                <div class="script-para">
                                    Aur ek <span class="highlight">Universal Principle</span>: <span class="emphasis">DIVIDE & CONQUER!</span><br>
                                    Big scary problem like "Design Instagram" — isko <span class="highlight">small parts</span> mein todo: User Service, Feed Service, Story Service. Pehle ek solve karo, phir next. <span class="emphasis">Step by step conquer karo!</span>
                                </div>

                                <div class="script-para" style="margin-top: 1rem; padding: 1rem; background: rgba(255, 217, 61, 0.1); border-radius: 8px; border-left: 3px solid var(--accent-yellow);">
                                    <span class="highlight">🎯 Remember:</span><br>
                                    <span class="emphasis">Scope Fence</span> → Time limited hai<br>
                                    <span class="emphasis">Clarify</span> → Assume mat karo<br>
                                    <span class="emphasis">Challenge</span> → Critical questions pucho<br>
                                    <span class="emphasis">Divide & Conquer</span> → Big → Small parts
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual Diagram Section -->
                    <div class="diagram-section">
                        <div class="section-header">
                            <div class="section-icon">📊</div>
                            <div>
                                <div class="section-title">Visual Architecture Diagram</div>
                                <div class="section-subtitle">3 Golden Rules + Divide & Conquer</div>
                            </div>
                        </div>

                        <!-- 3 Golden Rules -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🏆 3 Golden Rules</div>
                            <div class="mermaid">
flowchart TB
    subgraph R1["🥇 RULE 1: SCOPE FENCE"]
        S1["Time Limited Hai!"]
        S2["IN SCOPE vs OUT OF SCOPE"]
        S3["Maturity ka sign 💪"]
    end
    
    subgraph R2["🥈 RULE 2: CLARIFICATIONS"]
        C1["Traffic kitna?"]
        C2["Latency requirement?"]
        C3["Consistency model?"]
    end
    
    subgraph R3["🥉 RULE 3: CRITICAL QUESTIONS"]
        Q1["HTTP ya gRPC?"]
        Q2["WebSockets ya Polling?"]
        Q3["Sync ya Async?"]
    end
    
    style S1 fill:#ffd93d,color:#fff
    style S2 fill:#ffd93d,color:#fff
    style S3 fill:#ffd93d,color:#fff
    style C1 fill:#c0c0c0,color:#fff
    style C2 fill:#c0c0c0,color:#fff
    style C3 fill:#c0c0c0,color:#fff
    style Q1 fill:#cd7f32,color:#fff
    style Q2 fill:#cd7f32,color:#fff
    style Q3 fill:#cd7f32,color:#fff
                            </div>
                        </div>

                        <!-- Divide & Conquer -->
                        <div class="mermaid-container">
                            <div class="diagram-label">🧩 Divide & Conquer — Big Problem → Small Parts</div>
                            <div class="mermaid">
flowchart TD
    BIG["😱 Design Instagram"]
    
    BIG --> U["👤 User Service"]
    BIG --> F["📰 Feed Service"]
    BIG --> S["📸 Story Service"]
    BIG --> N["🔔 Notification Service"]
    BIG --> C["📁 CDN"]
    
    U --> AUTH["🔐 Auth"]
    F --> CACHE["🔄 Cache"]
    S --> STORAGE["💾 Storage"]
    
    style BIG fill:#ef476f,color:#fff,stroke-width:3px
    style U fill:#3a86ff,color:#fff
    style F fill:#8338ec,color:#fff
    style S fill:#06d6a0,color:#fff
    style N fill:#ffbe0b,color:#fff
    style C fill:#ff006e,color:#fff
    style AUTH fill:#3a86ff,color:#fff
    style CACHE fill:#8338ec,color:#fff
    style STORAGE fill:#06d6a0,color:#fff
                            </div>
                        </div>
                    </div>

                    <!-- Takeaway Section -->
                    <div class="takeaway-section">
                        <div class="section-header">
                            <div class="section-icon">🧠</div>
                            <div>
                                <div class="section-title">Key Takeaways</div>
                                <div class="section-subtitle">Interview-ready points</div>
                            </div>
                        </div>

                        <div class="takeaway-box">
                            <div class="takeaway-label">💡 The 3 Golden Rules</div>
                            <p class="takeaway-text">
                                <span class="highlight">🥇 Scope Fence</span> — Define what's IN and OUT of scope<br>
                                <span class="highlight">🥈 Clarifications</span> — Ask about traffic, latency, consistency<br>
                                <span class="highlight">🥉 Critical Questions</span> — Challenge assumptions
                            </p>

                            <div class="future-ideas">
                                <span class="future-idea">HTTP vs gRPC</span>
                                <span class="future-idea">WebSockets vs Polling</span>
                                <span class="future-idea">Strong vs Eventual</span>
                                <span class="future-idea">Sync vs Async</span>
                            </div>
                        </div>

                        <div class="bottom-line-box">
                            <div class="bottom-line-label">📌 INTERVIEW ANSWER</div>
                            <p class="bottom-line-text">
                                <span class="emphasis">Rule 1</span> = Scope fence karo, time limited hai<br>
                                <span class="emphasis">Rule 2</span> = Clarifications lo, assume mat karo<br>
                                <span class="emphasis">Rule 3</span> = Critical questions pucho<br>
                                <span class="emphasis">Universal</span> = Divide & Conquer — big problem ko small parts mein todo! 🏆
                            </p>
                        </div>
                    </div>
                    </div>
                </article>

                <!-- Footer -->
                <footer class="footer">
                    <p>Made with 💜 for Tech Content Creators | Hinglish scripts that actually work! 🎬</p>
                    <p style="margin-top: 0.5rem;">Part of <a href="index.html">The Article</a> learning platform</p>
                </footer>
            </div>
        </main>
    </div>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">↑</button>

    <!-- Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <script>
        // Toggle Sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Toggle Category
        function toggleCategory(categoryId) {
            const category = document.getElementById(categoryId);
            const items = category.querySelector('.category-items');
            if (items) {
                items.style.display = items.style.display === 'none' ? 'flex' : 'none';
            }
        }

        // Copy Code
        function copyCode(btn) {
            const codeBlock = btn.closest('.code-block');
            const code = codeBlock.querySelector('code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                btn.innerHTML = '✅ Copied!';
                btn.style.background = 'var(--accent-green)';
                btn.style.borderColor = 'var(--accent-green)';
                btn.style.color = '#0a0a0f';
                setTimeout(() => {
                    btn.innerHTML = '📋 Copy';
                    btn.style.background = '';
                    btn.style.borderColor = '';
                    btn.style.color = '';
                }, 2000);
            });
        }

        // Reading Progress
        window.addEventListener('scroll', () => {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('readingProgress').style.width = scrolled + '%';

            // Back to top visibility
            const backToTop = document.getElementById('backToTop');
            if (winScroll > 300) {
                backToTop.style.opacity = '1';
                backToTop.style.visibility = 'visible';
            } else {
                backToTop.style.opacity = '0';
                backToTop.style.visibility = 'hidden';
            }
        });

        // Initial state
        document.getElementById('backToTop').style.opacity = '0';
        document.getElementById('backToTop').style.visibility = 'hidden';
        
        // Initialize Mermaid.js with dark theme
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#fff',
                primaryBorderColor: '#764ba2',
                lineColor: '#9ca3af',
                secondaryColor: '#1a1a2e',
                tertiaryColor: '#0f0f1a',
                background: '#0f0f1a',
                mainBkg: '#1a1a2e',
                secondBkg: '#0f0f1a',
                fontFamily: 'JetBrains Mono, monospace',
                fontSize: '14px',
                nodeBorder: '#667eea',
                clusterBkg: 'rgba(102,126,234,0.1)',
                clusterBorder: '#667eea',
                edgeLabelBackground: '#1a1a2e',
                actorBkg: '#667eea',
                actorBorder: '#764ba2',
                actorTextColor: '#fff',
                signalColor: '#9ca3af',
                signalTextColor: '#fff'
            },
            flowchart: {
                curve: 'basis',
                padding: 20,
                useMaxWidth: true
            },
            sequence: {
                useMaxWidth: true,
                actorMargin: 50,
                showSequenceNumbers: false
            }
        });

        // ==================== COLLAPSIBLE REEL FUNCTIONS ====================
        
        // Toggle reel expand/collapse
        function toggleReel(header) {
            const card = header.closest('.reel-card');
            const isExpanding = !card.classList.contains('expanded');
            
            // Store current scroll position and card's position relative to viewport
            const cardRect = card.getBoundingClientRect();
            const scrollY = window.scrollY;
            const cardTopRelativeToViewport = cardRect.top;
            
            // Collapse all other expanded cards
            document.querySelectorAll('.reel-card.expanded').forEach(otherCard => {
                if (otherCard !== card) {
                    otherCard.classList.remove('expanded');
                    const otherIcon = otherCard.querySelector('.reel-expand-icon');
                    if (otherIcon) {
                        otherIcon.style.transform = 'rotate(0deg)';
                    }
                }
            });
            
            // Toggle current card
            card.classList.toggle('expanded');
            
            // Update icon rotation
            const icon = header.querySelector('.reel-expand-icon');
            if (card.classList.contains('expanded')) {
                icon.style.transform = 'rotate(180deg)';
            } else {
                icon.style.transform = 'rotate(0deg)';
            }
            
            // Restore scroll position to keep the clicked card in the same viewport position
            requestAnimationFrame(() => {
                const newCardRect = card.getBoundingClientRect();
                const scrollAdjustment = newCardRect.top - cardTopRelativeToViewport;
                window.scrollTo({
                    top: scrollY + scrollAdjustment,
                    behavior: 'instant'
                });
            });
        }
        
        // Toggle completion checkbox
        function toggleComplete(checkbox) {
            const card = checkbox.closest('.reel-card');
            const scriptId = checkbox.id.replace('check-', '');
            
            if (checkbox.checked) {
                card.classList.add('completed');
            } else {
                card.classList.remove('completed');
            }
            
            // Save to server and localStorage
            saveProgress(scriptId, checkbox.checked);
        }
        
        // Save progress to server and localStorage
        async function saveProgress(scriptId, completed) {
            const checkboxes = document.querySelectorAll('.reel-checkbox');
            const progress = {};
            
            checkboxes.forEach(cb => {
                progress[cb.id] = cb.checked;
            });
            
            // Save to localStorage as backup
            localStorage.setItem('reelScriptsProgress', JSON.stringify(progress));
            
            // Save to server
            try {
                const response = await fetch('/api/progress/scripts', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        scriptId: scriptId,
                        completed: completed
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('Progress saved to server:', data);
                }
            } catch (error) {
                console.log('Server not available, using localStorage only');
            }
            
            updateProgressDisplay();
        }
        
        // Load progress from server or localStorage
        async function loadProgress() {
            let progressLoaded = false;
            
            // Try to load from server first
            try {
                const response = await fetch('/api/progress');
                if (response.ok) {
                    const data = await response.json();
                    if (data.scripts && data.scripts.items) {
                        Object.keys(data.scripts.items).forEach(key => {
                            const script = data.scripts.items[key];
                            const checkbox = document.getElementById('check-' + script.id);
                            if (checkbox) {
                                checkbox.checked = script.completed;
                                if (script.completed) {
                                    checkbox.closest('.reel-card').classList.add('completed');
                                }
                            }
                        });
                        progressLoaded = true;
                        console.log('Progress loaded from server');
                    }
                }
            } catch (error) {
                console.log('Server not available, loading from localStorage');
            }
            
            // Fallback to localStorage
            if (!progressLoaded) {
                const saved = localStorage.getItem('reelScriptsProgress');
                if (saved) {
                    const progress = JSON.parse(saved);
                    
                    Object.keys(progress).forEach(id => {
                        const checkbox = document.getElementById(id);
                        if (checkbox) {
                            checkbox.checked = progress[id];
                            if (progress[id]) {
                                checkbox.closest('.reel-card').classList.add('completed');
                            }
                        }
                    });
                }
            }
            updateProgressDisplay();
        }
        
        // Update progress display (progress bar)
        function updateProgressDisplay() {
            const total = document.querySelectorAll('.reel-checkbox').length;
            const completed = document.querySelectorAll('.reel-checkbox:checked').length;
            const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
            
            // Update progress stats
            const progressStats = document.getElementById('progressStats');
            if (progressStats) {
                progressStats.textContent = `${completed}/${total}`;
            }
            
            // Update progress bar
            const progressBarFill = document.getElementById('progressBarFill');
            if (progressBarFill) {
                progressBarFill.style.width = `${percentage}%`;
            }
            
            // Update percentage text
            const progressPercentage = document.getElementById('progressPercentage');
            if (progressPercentage) {
                progressPercentage.textContent = `${percentage}% Complete`;
            }
            
            // Update progress badge if exists
            const badge = document.querySelector('.progress-badge');
            if (badge) {
                badge.textContent = `${completed}/${total} Completed`;
            }
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved progress
            loadProgress();
            
            // All reels start collapsed (no 'expanded' class by default)
            // Initialize expand icons to default rotation
            document.querySelectorAll('.reel-expand-icon').forEach(icon => {
                icon.style.transform = 'rotate(0deg)';
            });
        });
    </script>
</body>
</html>
